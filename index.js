import{a as v,S as X}from"./assets/vendor-CCfgLW0g.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();const a={modal:document.querySelector(".modal"),artistDataLoader:document.getElementById("artistDataLoader"),artistDataSpinner:document.querySelector("#artistDataLoader .spinner"),artist:{name:document.querySelector(".artist-name"),thumb:document.querySelector(".artist-thumb"),years:document.querySelector(".artist-years"),gender:document.querySelector(".artist-gender"),members:document.querySelector(".artist-members"),country:document.querySelector(".artist-country"),bio:document.querySelector(".artist-bio"),genres:document.querySelector(".artist-genres")},albums:{container:document.querySelector(".albums-container")},artistCardSection:document.querySelector(".artist-card")};function g(){a.modal.classList.add("modal--hidden"),document.body.classList.remove("no-scroll")}function Z(){const e=document.querySelector(".modal__close-button"),t=document.querySelector(".modal");e&&e.addEventListener("click",g),t&&t.addEventListener("click",s=>{s.target===t&&g()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&!a.modal.classList.contains("modal--hidden")&&g()})}async function ee(e){if(!e)throw new Error("Artist ID is required");const[t,s]=await Promise.all([v.get(`https://sound-wave.b.goit.study/api/artists/${e}`),v.get("https://sound-wave.b.goit.study/api/artists")]),n=t.data,r=s.data.artists||[];if(!(n!=null&&n.strArtist))throw new Error("No artist data");console.log("üîç artistId:",e);const o=r.find(i=>i._id===e);return o?o.genres&&(n.genres=o.genres):console.warn("‚ö†Ô∏è Artist not found in allArtists:",e),n}function te(e){const{name:t,thumb:s,years:n,gender:r,members:o,country:i,bio:l}=a.artist;t.textContent=e.strArtist??"No name",s.src=e.strArtistThumb||"https://via.placeholder.com/200x200?text=No+Image",s.alt=`Artist photo ${e.strArtist??""}`,l.textContent=e.strBiographyEN??"No description",n.textContent=e.intFormedYear?`${e.intFormedYear} - ${e.intDiedYear||"present"}`:"No data",r.textContent=e.strGender||"No data",o.textContent=e.intMembers||"No data",i.textContent=e.strCountry||"No data"}function se(e){const t=Math.floor(e/1e3),s=Math.floor(t/60),n=t%60;return`${s}:${n.toString().padStart(2,"0")}`}function ne(e,t){return e.reduce((s,n)=>{if(n.strArtist!==t)return s;const r=n.strAlbum||"Unknown Album";return s[r]||(s[r]=[]),s[r].push(n),s},{})}function re(e,t){const s=a.albums.container;if(!s)return;const n=ne(e,t);s.innerHTML="";const r=document.createElement("ul");r.classList.add("albums__card-list");for(const[o,i]of Object.entries(n)){const l=document.createElement("li");l.className="albums__name-item albums-name";const w=document.createElement("h4");w.className="albums__name-title",w.textContent=o,l.appendChild(w);const L=document.createElement("div");L.className="albums__track-option";const S=document.createElement("ul");S.className="albums__track-list-option",S.innerHTML=`
      <li class="albums__track-item">track</li>
      <li class="albums__time-item">time</li>
      <li class="albums__link-item">link</li>
    `,L.appendChild(S),i.forEach(m=>{const M=document.createElement("ul");M.className="albums__track-list";const C=document.createElement("li");C.className="albums__track-name",C.textContent=m.strTrack||"";const q=document.createElement("li");q.className="albums__trak-time",q.textContent=m.intDuration?se(m.intDuration):"";const A=document.createElement("li");if(A.className="albums__trak-link",m.movie){const f=document.createElement("a");f.href=m.movie,f.target="_blank",f.rel="noopener noreferrer",f.innerHTML=`
        <svg width="16" height="16">
          <use href="icons.svg#icon-youtube"></use>
        </svg>`,A.appendChild(f)}M.append(C,q,A),L.appendChild(M)}),l.appendChild(L),r.appendChild(l)}s.appendChild(r)}function oe(e,t){if(!(e instanceof HTMLElement)){console.error("container not DOM-element:",e);return}if(console.log("container:",e),console.log("genres:",t),e.innerHTML="",t&&t.length>0)t.forEach(s=>{const n=document.createElement("span");n.classList.add("artist-card__genres-item"),n.textContent=s,e.appendChild(n),console.log("Added genre:",s)});else{const s=document.createElement("span");s.classList.add("artist-card__genres-item"),s.textContent="Genres not available",e.appendChild(s)}}function ae(){if(!a.artistDataLoader||!a.artistCardSection){console.error("DOM references for loader are not found!");return}a.artistDataLoader.classList.remove("loader-hidden"),a.artistDataLoader.classList.add("loader-visible"),a.artistCardSection.classList.add("hidden")}function ie(){if(!a.artistDataLoader||!a.artistCardSection){console.error("DOM references for loader are not found!");return}a.artistDataLoader.classList.remove("loader-visible"),a.artistDataLoader.classList.add("loader-hidden"),a.artistCardSection.classList.remove("hidden")}const B={showArtistLoader:ae,hideArtistLoader:ie};async function ce(e){B.showArtistLoader();try{a.modal.classList.remove("modal--hidden"),document.body.classList.add("no-scroll");const t=await ee(e);le(),te(t),re(t.tracksList,t.strArtist);const s=t.genres||[];console.log("üß™ genres container:",a.artist.genres),oe(a.artist.genres,s)}catch(t){console.error("Error to load artist data:",t.message,t),alert("Artist data not found"),g()}finally{B.hideArtistLoader()}}function le(){a.albumsContainer&&(a.albumsContainer.innerHTML=""),a.genres&&(a.genres.innerHTML=""),a.artistInfoContainer&&(a.artistInfoContainer.innerHTML="")}Z();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".open-artist-modal");e&&e.addEventListener("click",async()=>{const t=e.dataset.artistId;console.log("‚ñ∂Ô∏è ID –¥–ª—è –º–æ–¥–∞–ª–∫–∏:",t),await ce(t)})});document.getElementById("exploreBtn").addEventListener("click",function(){document.getElementById("artists").scrollIntoView({behavior:"smooth"})});async function O(e=1){try{return(await v.get(`https://sound-wave.b.goit.study/api/artists?limit=8&page=${e}`)).data.artists}catch(t){console.log(t)}}const x=document.querySelector(".artists-list");let I=0;de();async function de(){const e=await O(),t=H(e);x.innerHTML=t,I=1}const h=document.querySelector(".artists-load-more-btn");h.addEventListener("click",ue);async function ue(){try{pe(),h.style.display="none",I+=1;const e=await O(I);e.length===0&&(h.style.display="none");const t=H(e);x.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}finally{ve(),h.style.display="flex"}}function me(e,t){if(typeof e!="string")return"";const s=window.innerWidth;return s<768?t=60:s<1440?t=160:t=144,e.length>t?e.slice(0,t)+"...":e}function fe(e){return e.replace(/[,/]/g," ")}function H(e){return e.map(({_id:t,genres:s,strArtist:n,strArtistThumb:r,strBiographyEN:o})=>`
      <li class="artists-card-item">

        <img class="artists-image" src="${r}" alt="${n}"/>

        <ul class="artists-genres-list">
        ${s.map(i=>`<li class="artists-genres-item">${fe(i)}</li>`).join("")}
        </ul>
        <p class="artists-name">${n}</p>
        <p class="artists-information">${me(o,144)}</p>
       <button class="artists-learn-more-card-btn open-artist-modal btn-click" data-artist-id="${t}">
       Learn More
        <svg class="caret-right-icon" width="24" height="24" >
        <use href="/img/artists.svg#icon-caret-right"></use>
        </svg>

       </button>
     </li>
      `).join("")||""}document.addEventListener("click",e=>{const t=e.target.closest(".open-artist-modal");if(t){const s=t.dataset.artistId;s?openModal(s):(console.error("Artist ID not found on the button"),alert("Failed to determine the artist ID"))}});const j=document.querySelector(".loader");function pe(){j.classList.remove("visually-hidden")}function ve(){j.classList.add("visually-hidden")}const P=document.querySelector(".modal-feedback-backdrop"),R=document.querySelector(".modal-feedback-wrapper"),d=document.querySelector(".modal-feedback-form"),W=document.querySelector(".data-wrapper"),u=document.querySelectorAll(".modal-feedback-stars"),G=document.querySelector(".modal-feedback-close"),$=document.querySelector(".modal-feedback-backdrop"),Y=document.querySelector(".modal-feedback-submit"),E=document.querySelector(".succes"),k=document.querySelector(".fail"),c=document.querySelector(".smiley"),_=document.querySelector(".notifications"),D=document.querySelector(".name-error"),T=document.querySelector(".message-error"),N=document.querySelector(".rating-error");let b=null,p=null;function U(e){e.target===$&&y()}function J(e){e.key==="Escape"&&y()}function V(e){const t=parseInt(e.currentTarget.dataset.value,10);u.forEach(n=>{const r=parseInt(n.dataset.value,10);n.classList.toggle("filled",r<=t)});const s=document.getElementById("radio-${rating}");s&&(s.checked=!0)}async function z(e){e.preventDefault();const t=e.currentTarget,s=t.elements.modalFeedbackName,n=t.elements.modalFeedbackMessage,r=t.elements.star,o={name:s.value.trim(),descr:n.value.trim(),rating:Number(r.value)};if(s.classList.remove("input-error"),D.classList.remove("is-onscreen"),o.name.length<2||o.name.length>16){s.classList.add("input-error"),D.classList.add("is-onscreen");return}if(n.classList.remove("input-error"),T.classList.remove("is-onscreen"),o.descr.length<10||o.descr.length>512){n.classList.add("input-error"),T.classList.add("is-onscreen");return}if(N.classList.remove("is-onscreen"),!o.rating){N.classList.add("is-onscreen");return}try{const i=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!i.ok)throw new Error("Something went wrong: "+i.status);const l=await i.json();console.log(l.message||"Feedback submitted!"),console.log(o),p=setTimeout(()=>{_.classList.remove("visually-hidden"),E.classList.remove("visually-hidden"),E.classList.add("is-onscreen"),c.classList.remove("visually-hidden"),c.classList.remove("normal"),c.classList.add("is-onscreen"),c.classList.add("happy")},1200)}catch(i){console.error(i),p=setTimeout(()=>{_.classList.remove("visually-hidden"),k.classList.remove("visually-hidden"),k.classList.add("is-onscreen"),c.classList.remove("visually-hidden"),c.classList.add("is-onscreen")},1200)}finally{W.classList.add("slide-out-elliptic-bottom-bck"),Y.classList.add("submited"),R.classList.add("submited"),d.reset(),r.forEach(i=>i.classList.remove("filled")),b=setTimeout(()=>{y()},5500)}}function K(e){const t=parseInt(e.currentTarget.dataset.value,10);u.forEach(s=>{const n=parseInt(s.dataset.value,10);s.classList.toggle("hovered",n<=t)})}function Q(){u.forEach(e=>e.classList.remove("hovered"))}function ye(){b&&(clearTimeout(b),b=null),p&&(clearTimeout(p),p=null),Le(),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",P.classList.toggle("is-open"),d.addEventListener("submit",z),G.addEventListener("click",y),$.addEventListener("click",U),window.addEventListener("keydown",J),u.forEach(e=>{e.addEventListener("click",V),e.addEventListener("mouseover",K),e.addEventListener("mouseout",Q)})}function y(){document.documentElement.style.overflow="",document.body.style.overflow="",P.classList.toggle("is-open"),d.removeEventListener("submit",z),G.removeEventListener("click",y),$.removeEventListener("click",U),window.removeEventListener("keydown",J),u.forEach(e=>{e.removeEventListener("click",V),e.removeEventListener("mouseover",K),e.removeEventListener("mouseout",Q)})}function Le(){D.classList.remove("is-onscreen"),T.classList.remove("is-onscreen"),N.classList.remove("is-onscreen");const e=d.elements.modalFeedbackName,t=d.elements.modalFeedbackMessage;e.classList.remove("input-error"),t.classList.remove("input-error"),_.classList.add("visually-hidden"),E.classList.add("visually-hidden"),E.classList.remove("is-onscreen"),k.classList.add("visually-hidden"),k.classList.remove("is-onscreen"),c.classList.add("visually-hidden"),c.classList.remove("is-onscreen","happy"),c.classList.add("normal"),W.classList.remove("slide-out-elliptic-bottom-bck"),Y.classList.remove("submited"),R.classList.remove("submited"),d.reset(),u.forEach(s=>s.classList.remove("filled","hovered"))}document.addEventListener("DOMContentLoaded",async()=>{(await ge()).length>=3&&be()});v.defaults.baseURL="https://sound-wave.b.goit.study/api/";async function ge(){try{const e=await v.get("https://sound-wave.b.goit.study/api/feedbacks",{params:{limit:3,page:1}}),t=Array.isArray(e.data)?e.data:e.data.data;return console.log("–û—Ç—Ä–∏–º–∞–Ω–æ –≤—ñ–¥–≥—É–∫—ñ–≤:",t),!Array.isArray(t)||t.length===0?(console.warn("–°–ø–∏—Å–æ–∫ –≤—ñ–¥–≥—É–∫—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π."),[]):(he(t),t)}catch(e){return console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –≤—ñ–¥–≥—É–∫—ñ–≤:",e),document.getElementById("feedback-container").innerHTML='<li class="swiper-slide"><p>–í—ñ–¥–≥—É–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ.</p></li>',[]}}function he(e){const t=document.getElementById("feedback-container");t.innerHTML="",e.forEach(s=>{const n=Math.round(s.rating);t.insertAdjacentHTML("beforeend",`
      <li class="swiper-slide">
        <div class="feedback-card">
          <div class="rating value-${n}" aria-label="Rating: ${n} –∑ 5"></div>
          <p class="feedback-text">${s.descr}</p>
          <p class="feedback-author">${s.name}</p>
        </div>
      </li>`)})}function be(){new X(".feedback-swiper",{loop:!0,pagination:{el:".custom-pagination",clickable:!0,renderBullet:(e,t)=>`<span class="${t}"></span>`},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}})}const F=document.querySelector("#open-feedback");F&&F.addEventListener("click",()=>{ye()});const Ee=document.getElementById("modal"),ke=document.getElementById("modal-close");ke.addEventListener("click",()=>{Ee.classList.remove("active")});
//# sourceMappingURL=index.js.map
