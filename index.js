import{a as m,S as Y}from"./assets/vendor-CCfgLW0g.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();const a={modal:document.querySelector(".modal"),artistDataLoader:document.getElementById("artistDataLoader"),artistDataSpinner:document.querySelector("#artistDataLoader .spinner"),artist:{name:document.querySelector(".artist-name"),thumb:document.querySelector(".artist-thumb"),years:document.querySelector(".artist-years"),gender:document.querySelector(".artist-gender"),members:document.querySelector(".artist-members"),country:document.querySelector(".artist-country"),bio:document.querySelector(".artist-bio"),genres:document.querySelector(".artist-genres")},albums:{container:document.querySelector(".albums-container")},artistCardSection:document.querySelector(".artist-card")};function y(){a.modal.classList.add("modal--hidden"),document.body.classList.remove("no-scroll")}function U(){const e=document.querySelector(".modal__close-button"),t=document.querySelector(".modal");e&&e.addEventListener("click",y),t&&t.addEventListener("click",s=>{s.target===t&&y()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&!a.modal.classList.contains("modal--hidden")&&y()})}async function J(e){if(!e)throw new Error("Artist ID is required");const[t,s]=await Promise.all([m.get(`https://sound-wave.b.goit.study/api/artists/${e}`),m.get("https://sound-wave.b.goit.study/api/artists")]),n=t.data,r=s.data.artists||[];if(!(n!=null&&n.strArtist))throw new Error("No artist data");console.log("üîç artistId:",e);const o=r.find(i=>i._id===e);return o?o.genres&&(n.genres=o.genres):console.warn("‚ö†Ô∏è Artist not found in allArtists:",e),n}function V(e){const{name:t,thumb:s,years:n,gender:r,members:o,country:i,bio:c}=a.artist;t.textContent=e.strArtist??"No name",s.src=e.strArtistThumb||"https://via.placeholder.com/200x200?text=No+Image",s.alt=`Artist photo ${e.strArtist??""}`,c.textContent=e.strBiographyEN??"No description",n.textContent=e.intFormedYear?`${e.intFormedYear} - ${e.intDiedYear||"present"}`:"No data",r.textContent=e.strGender||"No data",o.textContent=e.intMembers||"No data",i.textContent=e.strCountry||"No data"}function z(e){const t=Math.floor(e/1e3),s=Math.floor(t/60),n=t%60;return`${s}:${n.toString().padStart(2,"0")}`}function K(e,t){return e.reduce((s,n)=>{if(n.strArtist!==t)return s;const r=n.strAlbum||"Unknown Album";return s[r]||(s[r]=[]),s[r].push(n),s},{})}function Q(e,t){const s=a.albums.container;if(!s)return;const n=K(e,t);s.innerHTML="";const r=document.createElement("ul");r.classList.add("albums__card-list");for(const[o,i]of Object.entries(n)){const c=document.createElement("li");c.className="albums__name-item albums-name";const b=document.createElement("h4");b.className="albums__name-title",b.textContent=o,c.appendChild(b);const g=document.createElement("div");g.className="albums__track-option";const v=document.createElement("ul");v.className="albums__track-list-option",v.innerHTML=`
      <li class="albums__track-item">track</li>
      <li class="albums__time-item">time</li>
      <li class="albums__link-item">link</li>
    `,g.appendChild(v),i.forEach(d=>{const L=document.createElement("ul");L.className="albums__track-list";const E=document.createElement("li");E.className="albums__track-name",E.textContent=d.strTrack||"";const k=document.createElement("li");k.className="albums__trak-time",k.textContent=d.intDuration?z(d.intDuration):"";const w=document.createElement("li");if(w.className="albums__trak-link",d.movie){const u=document.createElement("a");u.href=d.movie,u.target="_blank",u.rel="noopener noreferrer",u.innerHTML=`
        <svg width="16" height="16">
          <use href="icons.svg#icon-youtube"></use>
        </svg>`,w.appendChild(u)}L.append(E,k,w),g.appendChild(L)}),c.appendChild(g),r.appendChild(c)}s.appendChild(r)}function X(e,t){if(!(e instanceof HTMLElement)){console.error("container not DOM-element:",e);return}if(console.log("container:",e),console.log("genres:",t),e.innerHTML="",t&&t.length>0)t.forEach(s=>{const n=document.createElement("span");n.classList.add("artist-card__genres-item"),n.textContent=s,e.appendChild(n),console.log("Added genre:",s)});else{const s=document.createElement("span");s.classList.add("artist-card__genres-item"),s.textContent="Genres not available",e.appendChild(s)}}function Z(){if(!a.artistDataLoader||!a.artistCardSection){console.error("DOM references for loader are not found!");return}a.artistDataLoader.classList.remove("loader-hidden"),a.artistDataLoader.classList.add("loader-visible"),a.artistCardSection.classList.add("hidden")}function ee(){if(!a.artistDataLoader||!a.artistCardSection){console.error("DOM references for loader are not found!");return}a.artistDataLoader.classList.remove("loader-visible"),a.artistDataLoader.classList.add("loader-hidden"),a.artistCardSection.classList.remove("hidden")}const C={showArtistLoader:Z,hideArtistLoader:ee};async function te(e){C.showArtistLoader();try{a.modal.classList.remove("modal--hidden"),document.body.classList.add("no-scroll");const t=await J(e);se(),V(t),Q(t.tracksList,t.strArtist);const s=t.genres||[];console.log("üß™ genres container:",a.artist.genres),X(a.artist.genres,s)}catch(t){console.error("Error to load artist data:",t.message,t),alert("Artist data not found"),y()}finally{C.hideArtistLoader()}}function se(){a.albumsContainer&&(a.albumsContainer.innerHTML=""),a.genres&&(a.genres.innerHTML=""),a.artistInfoContainer&&(a.artistInfoContainer.innerHTML="")}U();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".open-artist-modal");e&&e.addEventListener("click",async()=>{const t=e.dataset.artistId;console.log("‚ñ∂Ô∏è ID –¥–ª—è –º–æ–¥–∞–ª–∫–∏:",t),await te(t)})});document.getElementById("exploreBtn").addEventListener("click",function(){document.getElementById("artists").scrollIntoView({behavior:"smooth"})});async function N(e=1){try{return(await m.get(`https://sound-wave.b.goit.study/api/artists?limit=8&page=${e}`)).data.artists}catch(t){console.log(t)}}const B=document.querySelector(".artists-list");let S=0;ne();async function ne(){const e=await N(),t=O(e);B.innerHTML=t,S=1}const h=document.querySelector(".artists-load-more-btn");h.addEventListener("click",re);async function re(){try{ie(),h.style.display="none",S+=1;const e=await N(S);e.length===0&&(h.style.display="none");const t=O(e);B.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}finally{ce(),h.style.display="flex"}}function oe(e,t){if(typeof e!="string")return"";const s=window.innerWidth;return s<768?t=60:s<1440?t=160:t=144,e.length>t?e.slice(0,t)+"...":e}function ae(e){return e.replace(/[,/]/g," ")}function O(e){return e.map(({_id:t,genres:s,strArtist:n,strArtistThumb:r,strBiographyEN:o})=>`
      <li class="artists-card-item">

        <img class="artists-image" src="${r}" alt="${n}"/>

        <ul class="artists-genres-list">
        ${s.map(i=>`<li class="artists-genres-item">${ae(i)}</li>`).join("")}
        </ul>
        <p class="artists-name">${n}</p>
        <p class="artists-information">${oe(o,144)}</p>
       <button class="artists-learn-more-card-btn open-artist-modal btn-click" data-artist-id="${t}">
       Learn More
        <svg class="caret-right-icon" width="24" height="24" >
        <use href="/img/artists.svg#icon-caret-right"></use>
        </svg>

       </button>
     </li>
      `).join("")||""}document.addEventListener("click",e=>{const t=e.target.closest(".open-artist-modal");if(t){const s=t.dataset.artistId;s?openModal(s):(console.error("Artist ID not found on the button"),alert("Failed to determine the artist ID"))}});const x=document.querySelector(".loader");function ie(){x.classList.remove("visually-hidden")}function ce(){x.classList.add("visually-hidden")}const H=document.querySelector(".modal-feedback-backdrop"),le=document.querySelector(".modal-feedback-wrapper"),M=document.querySelector(".modal-feedback-form"),de=document.querySelector(".data-wrapper"),f=document.querySelectorAll(".modal-feedback-stars"),F=document.querySelector(".modal-feedback-close"),j=document.querySelector(".modal-feedback-backdrop"),ue=document.querySelector(".modal-feedback-submit"),q=document.querySelector(".succes"),A=document.querySelector(".fail"),l=document.querySelector(".smiley"),_=document.querySelector(".notifications"),D=document.querySelector(".name-error"),I=document.querySelector(".message-error"),T=document.querySelector(".rating-error");function me(e){e.target===j&&p()}function fe(e){e.key==="Escape"&&p()}function P(e){const t=parseInt(e.currentTarget.dataset.value,10);f.forEach(n=>{const r=parseInt(n.dataset.value,10);n.classList.toggle("filled",r<=t)});const s=document.getElementById("radio-${rating}");s&&(s.checked=!0)}async function R(e){e.preventDefault();const t=e.currentTarget,s=t.elements.modalFeedbackName,n=t.elements.modalFeedbackMessage,r=t.elements.star,o={name:s.value.trim(),descr:n.value.trim(),rating:Number(r.value)};if(s.classList.remove("input-error"),D.classList.remove("is-onscreen"),o.name.length<2||o.name.length>16){s.classList.add("input-error"),D.classList.add("is-onscreen");return}if(n.classList.remove("input-error"),I.classList.remove("is-onscreen"),o.descr.length<10||o.descr.length>512){n.classList.add("input-error"),I.classList.add("is-onscreen");return}if(T.classList.remove("is-onscreen"),!o.rating){T.classList.add("is-onscreen");return}try{const i=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!i.ok)throw new Error("Something went wrong: "+i.status);const c=await i.json();console.log(c.message||"Feedback submitted!"),console.log(o),setTimeout(()=>{_.classList.remove("visually-hidden"),q.classList.remove("visually-hidden"),q.classList.add("is-onscreen"),l.classList.remove("visually-hidden"),l.classList.remove("normal"),l.classList.add("is-onscreen"),l.classList.add("happy")},1200)}catch(i){console.error(i),setTimeout(()=>{_.classList.remove("visually-hidden"),A.classList.remove("visually-hidden"),A.classList.add("is-onscreen"),l.classList.remove("visually-hidden"),l.classList.add("is-onscreen")},1200)}finally{de.classList.add("slide-out-elliptic-bottom-bck"),ue.classList.add("submited"),le.classList.add("submited"),M.reset(),r.forEach(i=>i.classList.remove("filled")),setTimeout(()=>{p()},5500)}}function W(e){const t=parseInt(e.currentTarget.dataset.value,10);f.forEach(s=>{const n=parseInt(s.dataset.value,10);s.classList.toggle("hovered",n<=t)})}function G(){f.forEach(e=>e.classList.remove("hovered"))}function pe(){document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",H.classList.toggle("is-open"),M.addEventListener("submit",R),F.addEventListener("click",p),j.addEventListener("click",me),window.addEventListener("keydown",fe),f.forEach(e=>{e.addEventListener("click",P),e.addEventListener("mouseover",W),e.addEventListener("mouseout",G)})}function p(){document.documentElement.style.overflow="",document.body.style.overflow="",H.classList.toggle("is-open"),M.removeEventListener("submit",R),F.removeEventListener("click",p),f.forEach(e=>{e.removeEventListener("click",P),e.removeEventListener("mouseover",W),e.removeEventListener("mouseout",G)})}document.addEventListener("DOMContentLoaded",async()=>{(await ge()).length>=3&&he()});m.defaults.baseURL="https://sound-wave.b.goit.study/api/";async function ge(){try{const e=await m.get("https://sound-wave.b.goit.study/api/feedbacks",{params:{limit:3,page:1}}),t=Array.isArray(e.data)?e.data:e.data.data;return console.log("–û—Ç—Ä–∏–º–∞–Ω–æ –≤—ñ–¥–≥—É–∫—ñ–≤:",t),!Array.isArray(t)||t.length===0?(console.warn("–°–ø–∏—Å–æ–∫ –≤—ñ–¥–≥—É–∫—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π."),[]):(ye(t),t)}catch(e){return console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –≤—ñ–¥–≥—É–∫—ñ–≤:",e),document.getElementById("feedback-container").innerHTML='<li class="swiper-slide"><p>–í—ñ–¥–≥—É–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ.</p></li>',[]}}function ye(e){const t=document.getElementById("feedback-container");t.innerHTML="",e.forEach(s=>{const n=Math.round(s.rating);t.insertAdjacentHTML("beforeend",`
      <li class="swiper-slide">
        <div class="feedback-card">
          <div class="rating value-${n}" aria-label="Rating: ${n} –∑ 5"></div>
          <p class="feedback-text">${s.descr}</p>
          <p class="feedback-author">${s.name}</p>
        </div>
      </li>`)})}function he(){new Y(".feedback-swiper",{loop:!0,pagination:{el:".custom-pagination",clickable:!0,renderBullet:(e,t)=>`<span class="${t}"></span>`},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}})}const $=document.querySelector("#open-feedback");$&&$.addEventListener("click",()=>{pe()});const be=document.getElementById("modal"),ve=document.getElementById("modal-close");ve.addEventListener("click",()=>{be.classList.remove("active")});
//# sourceMappingURL=index.js.map
