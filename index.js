import{a as E}from"./assets/vendor-B2YOV0tR.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const s={modal:document.querySelector(".modal"),artistDataLoader:document.getElementById("artistDataLoader"),artistDataSpinner:document.querySelector("#artistDataLoader .spinner"),artist:{name:document.querySelector(".artist-name"),thumb:document.querySelector(".artist-thumb"),years:document.querySelector(".artist-years"),gender:document.querySelector(".artist-gender"),members:document.querySelector(".artist-members"),country:document.querySelector(".artist-country"),bio:document.querySelector(".artist-bio"),genres:document.querySelector(".artist-genres")},albums:{container:document.querySelector(".albums-container")},artistCardSection:document.querySelector(".artist-card")};function f(){s.modal.classList.add("modal--hidden"),document.body.classList.remove("no-scroll")}function N(){const e=document.querySelector(".modal__close-button"),t=document.querySelector(".modal");e&&e.addEventListener("click",f),t&&t.addEventListener("click",n=>{n.target===t&&f()}),document.addEventListener("keydown",n=>{n.key==="Escape"&&!s.modal.classList.contains("modal--hidden")&&f()})}async function q(e){if(!e)throw new Error("Artist ID is required");const[t,n]=await Promise.all([E.get(`https://sound-wave.b.goit.study/api/artists/${e}`),E.get("https://sound-wave.b.goit.study/api/artists")]),r=t.data,o=n.data.artists||[];if(!(r!=null&&r.strArtist))throw new Error("No artist data");console.log("ðŸ” artistId:",e);const a=o.find(i=>i._id===e);return a?a.genres&&(r.genres=a.genres):console.warn("âš ï¸ Artist not found in allArtists:",e),r}function w(e){const{name:t,thumb:n,years:r,gender:o,members:a,country:i,bio:c}=s.artist;t.textContent=e.strArtist??"No name",n.src=e.strArtistThumb||"https://via.placeholder.com/200x200?text=No+Image",n.alt=`Artist photo ${e.strArtist??""}`,c.textContent=e.strBiographyEN??"No description",r.textContent=e.intFormedYear?`${e.intFormedYear} - ${e.intDiedYear||"present"}`:"No data",o.textContent=e.strGender||"No data",a.textContent=e.intMembers||"No data",i.textContent=e.strCountry||"No data"}function I(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),r=t%60;return`${n}:${r.toString().padStart(2,"0")}`}function x(e,t){return e.reduce((n,r)=>{if(r.strArtist!==t)return n;const o=r.strAlbum||"Unknown Album";return n[o]||(n[o]=[]),n[o].push(r),n},{})}function T(e,t){const n=s.albums.container;if(!n)return;const r=x(e,t);n.innerHTML="";const o=document.createElement("ul");o.classList.add("albums__card-list");for(const[a,i]of Object.entries(r)){const c=document.createElement("li");c.className="albums__name-item albums-name";const h=document.createElement("h4");h.className="albums__name-title",h.textContent=a,c.appendChild(h);const u=document.createElement("div");u.className="albums__track-option";const g=document.createElement("ul");g.className="albums__track-list-option",g.innerHTML=`
      <li class="albums__track-item">track</li>
      <li class="albums__time-item">time</li>
      <li class="albums__link-item">link</li>
    `,u.appendChild(g),i.forEach(d=>{const L=document.createElement("ul");L.className="albums__track-list";const v=document.createElement("li");v.className="albums__track-name",v.textContent=d.strTrack||"";const b=document.createElement("li");b.className="albums__trak-time",b.textContent=d.intDuration?I(d.intDuration):"";const p=document.createElement("li");if(p.className="albums__trak-link",d.movie){const m=document.createElement("a");m.href=d.movie,m.target="_blank",m.rel="noopener noreferrer",m.innerHTML=`
        <svg width="16" height="16">
          <use href="icons.svg#icon-youtube"></use>
        </svg>`,p.appendChild(m)}L.append(v,b,p),u.appendChild(L)}),c.appendChild(u),o.appendChild(c)}n.appendChild(o)}function B(e,t){if(!(e instanceof HTMLElement)){console.error("container not DOM-element:",e);return}if(console.log("container:",e),console.log("genres:",t),e.innerHTML="",t&&t.length>0)t.forEach(n=>{const r=document.createElement("span");r.classList.add("artist-card__genres-item"),r.textContent=n,e.appendChild(r),console.log("Added genre:",n)});else{const n=document.createElement("span");n.classList.add("artist-card__genres-item"),n.textContent="Genres not available",e.appendChild(n)}}function O(){if(!s.artistDataLoader||!s.artistCardSection){console.error("DOM references for loader are not found!");return}s.artistDataLoader.classList.remove("loader-hidden"),s.artistDataLoader.classList.add("loader-visible"),s.artistCardSection.classList.add("hidden")}function $(){if(!s.artistDataLoader||!s.artistCardSection){console.error("DOM references for loader are not found!");return}s.artistDataLoader.classList.remove("loader-visible"),s.artistDataLoader.classList.add("loader-hidden"),s.artistCardSection.classList.remove("hidden")}const C={showArtistLoader:O,hideArtistLoader:$};async function H(e){C.showArtistLoader();try{s.modal.classList.remove("modal--hidden"),document.body.classList.add("no-scroll");const t=await q(e);F(),w(t),T(t.tracksList,t.strArtist);const n=t.genres||[];console.log("ðŸ§ª genres container:",s.artist.genres),B(s.artist.genres,n)}catch(t){console.error("Error to load artist data:",t.message,t),alert("Artist data not found"),f()}finally{C.hideArtistLoader()}}function F(){s.albumsContainer&&(s.albumsContainer.innerHTML=""),s.genres&&(s.genres.innerHTML=""),s.artistInfoContainer&&(s.artistInfoContainer.innerHTML="")}N();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".open-artist-modal");e&&e.addEventListener("click",async()=>{const t=e.dataset.artistId;console.log("â–¶ï¸ ID Ð´Ð»Ñ Ð¼Ð¾Ð´Ð°Ð»ÐºÐ¸:",t),await H(t)})});document.getElementById("exploreBtn").addEventListener("click",function(){document.getElementById("artists").scrollIntoView({behavior:"smooth"})});const P=document.getElementById("modal"),G=document.getElementById("modal-close");G.addEventListener("click",()=>{P.classList.remove("active")});const R=document.querySelector(".modal-feedback-section"),y=document.querySelector(".modal-feedback-form"),l=document.querySelectorAll(".modal-feedback-stars"),S=document.querySelector(".modal-feedback-close");function _(e){const t=parseInt(e.currentTarget.dataset.value,10);l.forEach(r=>{const o=parseInt(r.dataset.value,10);r.classList.toggle("filled",o<=t)});const n=document.getElementById("radio-${rating}");n&&(n.checked=!0)}function k(e){e.preventDefault();const t=e.currentTarget,n={name:t.elements.modalFeedbackName.value.trim(),message:t.elements.modalFeedbackMessage.value.trim(),rating:t.elements.star.value};if(!n.name||!n.message||!n.rating){alert("Fill all fields");return}console.log(n),y.reset(),l.forEach(r=>{r.classList.remove("filled")})}function A(e){const t=parseInt(e.currentTarget.dataset.value,10);l.forEach(n=>{const r=parseInt(n.dataset.value,10);n.classList.toggle("hovered",r<=t)})}function D(){l.forEach(e=>e.classList.remove("hovered"))}document.body.style.overflow="hidden";y.addEventListener("submit",k);S.addEventListener("click",M);l.forEach(e=>{e.addEventListener("click",_),e.addEventListener("mouseover",A),e.addEventListener("mouseout",D)});function M(){document.body.style.overflow="",R.classList.add("visually-hidden"),y.removeEventListener("submit",k),S.removeEventListener("click",M),l.forEach(e=>{e.removeEventListener("click",_),e.removeEventListener("mouseover",A),e.removeEventListener("mouseout",D)})}
//# sourceMappingURL=index.js.map
