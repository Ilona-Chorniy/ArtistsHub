import{a as E,S as Z}from"./assets/vendor-Breb73Hu.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",function(s){const n=this.getAttribute("href");if(n.startsWith("#")){s.preventDefault();const o=document.querySelector(n);if(o){const r=document.querySelector(".header").offsetHeight,a=o.offsetTop-r-10;window.scrollTo({top:a,behavior:"smooth"})}}})})});document.getElementById("exploreBtn").addEventListener("click",function(){document.getElementById("artists").scrollIntoView({behavior:"smooth"})});const i={modal:document.querySelector(".modal"),artistDataLoader:document.getElementById("artistDataLoader"),artistDataSpinner:document.querySelector("#artistDataLoader .spinner"),artist:{name:document.querySelector(".artist-name"),thumb:document.querySelector(".artist-thumb"),years:document.querySelector(".artist-years"),gender:document.querySelector(".artist-gender"),members:document.querySelector(".artist-members"),country:document.querySelector(".artist-country"),bio:document.querySelector(".artist-bio"),genres:document.querySelector(".artist-genres")},albums:{container:document.querySelector(".albums-container")},artistCardSection:document.querySelector(".artist-card")};function k(){i.modal.classList.add("modal--hidden"),document.body.classList.remove("no-scroll")}function ee(){const e=document.querySelector(".modal__close-button"),t=document.querySelector(".modal");e&&e.addEventListener("click",k),t&&t.addEventListener("click",s=>{s.target===t&&k()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&!i.modal.classList.contains("modal--hidden")&&k()})}async function te(e){if(!e)throw new Error("Artist ID is required");const[t,s]=await Promise.all([E.get(`https://sound-wave.b.goit.study/api/artists/${e}`),E.get("https://sound-wave.b.goit.study/api/artists")]),n=t.data,o=s.data.artists||[];if(!(n!=null&&n.strArtist))throw new Error("No artist data");console.log("🔍 artistId:",e);const r=o.find(a=>a._id===e);return r?r.genres&&(n.genres=r.genres):console.warn("⚠️ Artist not found in allArtists:",e),n}function se(e){const{name:t,thumb:s,years:n,gender:o,members:r,country:a,bio:l}=i.artist;t.textContent=e.strArtist??"No name",s.src=e.strArtistThumb||"https://via.placeholder.com/200x200?text=No+Image",s.alt=`Artist photo ${e.strArtist??""}`,l.textContent=e.strBiographyEN??"No description",n.textContent=e.intFormedYear?`${e.intFormedYear} - ${e.intDiedYear||"present"}`:"No data",o.textContent=e.strGender||"No data",r.textContent=e.intMembers||"No data",a.textContent=e.strCountry||"No data"}function ne(e){const t=Math.floor(e/1e3),s=Math.floor(t/60),n=t%60;return`${s}:${n.toString().padStart(2,"0")}`}function oe(e,t){return e.reduce((s,n)=>{if(n.strArtist!==t)return s;const o=n.strAlbum||"Unknown Album";return s[o]||(s[o]=[]),s[o].push(n),s},{})}function re(e,t){const s=i.albums.container;if(!s)return;const n=oe(e,t);s.innerHTML="";const o=document.createElement("ul");o.classList.add("albums__card-list");for(const[r,a]of Object.entries(n)){const l=document.createElement("li");l.className="albums__name-item albums-name";const c=document.createElement("h4");c.className="albums__name-title",c.textContent=r,l.appendChild(c);const d=document.createElement("div");d.className="albums__track-option";const h=document.createElement("ul");h.className="albums__track-list-option",h.innerHTML=`
      <li class="albums__track-item">track</li>
      <li class="albums__time-item">time</li>
      <li class="albums__link-item">link</li>
    `,d.appendChild(h),a.forEach(u=>{const g=document.createElement("ul");g.className="albums__track-list";const q=document.createElement("li");q.className="albums__track-name",q.textContent=u.strTrack||"";const C=document.createElement("li");C.className="albums__trak-time",C.textContent=u.intDuration?ne(u.intDuration):"";const A=document.createElement("li");if(A.className="albums__trak-link",u.movie){const b=document.createElement("a");b.href=u.movie,b.target="_blank",b.rel="noopener noreferrer",b.innerHTML=`
        <svg width="16" height="16">
          <use href="icons.svg#icon-youtube"></use>
        </svg>`,A.appendChild(b)}g.append(q,C,A),d.appendChild(g)}),l.appendChild(d),o.appendChild(l)}s.appendChild(o)}function ae(e,t){if(!(e instanceof HTMLElement)){console.error("container not DOM-element:",e);return}if(console.log("container:",e),console.log("genres:",t),e.innerHTML="",t&&t.length>0)t.forEach(s=>{const n=document.createElement("span");n.classList.add("artist-card__genres-item"),n.textContent=s,e.appendChild(n),console.log("Added genre:",s)});else{const s=document.createElement("span");s.classList.add("artist-card__genres-item"),s.textContent="Genres not available",e.appendChild(s)}}function ie(){if(!i.artistDataLoader||!i.artistCardSection){console.error("DOM references for loader are not found!");return}i.artistDataLoader.classList.remove("loader-hidden"),i.artistDataLoader.classList.add("loader-visible"),i.artistCardSection.classList.add("hidden")}function ce(){if(!i.artistDataLoader||!i.artistCardSection){console.error("DOM references for loader are not found!");return}i.artistDataLoader.classList.remove("loader-visible"),i.artistDataLoader.classList.add("loader-hidden"),i.artistCardSection.classList.remove("hidden")}const H={showArtistLoader:ie,hideArtistLoader:ce};async function le(e){H.showArtistLoader();try{i.modal.classList.remove("modal--hidden"),document.body.classList.add("no-scroll");const t=await te(e);de(),se(t),re(t.tracksList,t.strArtist);const s=t.genres||[];console.log("🧪 genres container:",i.artist.genres),ae(i.artist.genres,s)}catch(t){console.error("Error to load artist data:",t.message,t),alert("Artist data not found"),k()}finally{H.hideArtistLoader()}}function de(){i.albumsContainer&&(i.albumsContainer.innerHTML=""),i.genres&&(i.genres.innerHTML=""),i.artistInfoContainer&&(i.artistInfoContainer.innerHTML="")}ee();async function F(e=1){try{return(await E.get(`https://sound-wave.b.goit.study/api/artists?limit=8&page=${e}`)).data.artists}catch(t){console.log(t)}}const $=document.querySelector(".artists-list");let T=0;ue();async function ue(){const e=await F(),t=x(e);$.innerHTML=t,T=1}const S=document.querySelector(".artists-load-more-btn");S.addEventListener("click",me);async function me(){try{ye(),S.style.display="none",T+=1;const e=await F(T);e.length===0&&(S.style.display="none");const t=x(e);$.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}finally{ve(),S.style.display="flex"}}function fe(e,t){if(typeof e!="string")return"";const s=window.innerWidth;return s<768?t=60:s<1440?t=160:t=144,e.length>t?e.slice(0,t)+"...":e}function pe(e){return e.replace(/[,/]/g," ")}function x(e){return e.map(({_id:t,genres:s,strArtist:n,strArtistThumb:o,strBiographyEN:r})=>`
      <li class="artists-card-item">

        <img class="artists-image" src="${o}" alt="${n}"/>

        <ul class="artists-genres-list">
        ${s.map(a=>`<li class="artists-genres-item">${pe(a)}</li>`).join("")}
        </ul>
        <p class="artists-name">${n}</p>
        <p class="artists-information">${fe(r,144)}</p>
       <button class="artists-learn-more-card-btn open-artist-modal" data-artist-id="${t}">
       Learn More
        <svg class="caret-right-icon" width="8" height="16" >
        <use href="icons.svg#icon-caret-right"></use>
        </svg>
       </button>
     </li>
      `).join("")||""}$.addEventListener("click",he);function he(e){const t=e.target.closest(".open-artist-modal");if(t){const s=t.dataset.artistId;s?le(s):console.error("Artist ID not found on the clicked button.")}}const P=document.querySelector(".loader");function ye(){P.classList.remove("visually-hidden")}function ve(){P.classList.add("visually-hidden")}const R=document.querySelector(".modal-feedback-backdrop"),j=document.querySelector(".modal-feedback-wrapper"),y=document.querySelector(".modal-feedback-form"),W=document.querySelector(".data-wrapper"),p=document.querySelectorAll(".modal-feedback-stars"),G=document.querySelector(".modal-feedback-close"),B=document.querySelector(".modal-feedback-backdrop"),Y=document.querySelector(".modal-feedback-submit"),w=document.querySelector(".success"),M=document.querySelector(".fail"),m=document.querySelector(".smiley"),_=document.querySelector(".notifications"),D=document.querySelector(".name-error"),I=document.querySelector(".message-error"),N=document.querySelector(".rating-error");let v=null,f=null;function U(e){e.target===B&&L()}function J(e){e.key==="Escape"&&L()}function V(e){const t=parseInt(e.currentTarget.dataset.value,10);p.forEach(n=>{const o=parseInt(n.dataset.value,10);n.classList.toggle("filled",o<=t)});const s=document.getElementById(`radio-${t}`);s&&(s.checked=!0)}async function z(e){var l;e.preventDefault();const t=e.currentTarget,s=t.elements.modalFeedbackName,n=t.elements.modalFeedbackMessage,o=t.elements.star,r=(l=Array.from(o).find(c=>c.checked))==null?void 0:l.value,a={name:s.value.trim(),descr:n.value.trim(),rating:Number(r)};if(s.classList.remove("input-error"),D.classList.remove("is-onscreen"),a.name.length<2||a.name.length>16){s.classList.add("input-error"),D.classList.add("is-onscreen");return}if(n.classList.remove("input-error"),I.classList.remove("is-onscreen"),a.descr.length<10||a.descr.length>512){n.classList.add("input-error"),I.classList.add("is-onscreen");return}if(N.classList.remove("is-onscreen"),!a.rating){N.classList.add("is-onscreen");return}try{const c=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!c.ok)throw new Error("Something went wrong: "+c.status);const d=await c.json();console.log(d.message||"Feedback submitted!"),console.log(a),f=setTimeout(()=>{_.classList.remove("visually-hidden"),w.classList.remove("visually-hidden"),w.classList.add("is-onscreen"),m.classList.remove("visually-hidden","normal"),m.classList.add("is-onscreen","happy")},1200)}catch(c){console.error(c),f=setTimeout(()=>{_.classList.remove("visually-hidden"),M.classList.remove("visually-hidden"),M.classList.add("is-onscreen"),m.classList.remove("visually-hidden"),m.classList.add("is-onscreen")},1200)}finally{try{W.classList.add("slide-out-elliptic-bottom-bck"),Y.classList.add("submited"),j.classList.add("submited"),y.reset(),p.forEach(c=>c.classList.remove("filled")),v=setTimeout(()=>{L()},5e3)}catch(c){L(),console.log(c)}}}function K(e){const t=parseInt(e.currentTarget.dataset.value,10);p.forEach(s=>{const n=parseInt(s.dataset.value,10);s.classList.toggle("hovered",n<=t)})}function Q(){p.forEach(e=>e.classList.remove("hovered"))}function Le(){v&&(clearTimeout(v),v=null),f&&(clearTimeout(f),f=null),ge(),document.documentElement.style.overflow="hidden",document.documentElement.style.scrollbarGutter="stable",document.body.style.overflow="hidden",R.classList.toggle("is-open"),y.addEventListener("submit",z),G.addEventListener("click",L),B.addEventListener("click",U),window.addEventListener("keydown",J),p.forEach(e=>{e.addEventListener("click",V),e.addEventListener("mouseover",K),e.addEventListener("mouseout",Q)})}function L(){X(),document.documentElement.style.overflow="",document.documentElement.style.scrollbarGutter="",document.body.style.overflow="",document.body.style.paddingRight="",R.classList.toggle("is-open"),y.removeEventListener("submit",z),G.removeEventListener("click",L),B.removeEventListener("click",U),window.removeEventListener("keydown",J),p.forEach(e=>{e.removeEventListener("click",V),e.removeEventListener("mouseover",K),e.removeEventListener("mouseout",Q)})}function ge(){const e=y.elements.modalFeedbackName,t=y.elements.modalFeedbackMessage;X(),D.classList.remove("is-onscreen"),I.classList.remove("is-onscreen"),N.classList.remove("is-onscreen"),e.classList.remove("input-error"),t.classList.remove("input-error"),_.classList.add("visually-hidden"),w.classList.add("visually-hidden"),w.classList.remove("is-onscreen"),M.classList.add("visually-hidden"),M.classList.remove("is-onscreen"),m.classList.add("visually-hidden"),m.classList.remove("is-onscreen","happy"),m.classList.add("normal"),W.classList.remove("slide-out-elliptic-bottom-bck"),Y.classList.remove("submited"),j.classList.remove("submited"),y.reset(),p.forEach(s=>s.classList.remove("filled","hovered"))}function X(){clearTimeout(v),clearTimeout(f),v=null,f=null}document.addEventListener("DOMContentLoaded",async()=>{(await be()).length>=3&&ke()});E.defaults.baseURL="https://sound-wave.b.goit.study/api/";async function be(){try{const e=await E.get("https://sound-wave.b.goit.study/api/feedbacks",{params:{limit:3,page:1}}),t=Array.isArray(e.data)?e.data:e.data.data;return console.log("Отримано відгуків:",t),!Array.isArray(t)||t.length===0?(console.warn("Список відгуків порожній."),[]):(Ee(t),t)}catch(e){return console.error("Помилка при завантаженні відгуків:",e),document.getElementById("feedback-container").innerHTML='<li class="swiper-slide"><p>Відгуки недоступні.</p></li>',[]}}function Ee(e){const t=document.getElementById("feedback-container");t.innerHTML="",e.forEach(s=>{const n=Math.round(s.rating);t.insertAdjacentHTML("beforeend",`
      <li class="swiper-slide">
        <div class="feedback-card">
          <div class="rating value-${n}" aria-label="Rating: ${n} з 5"></div>
          <p class="feedback-text">${s.descr}</p>
          <p class="feedback-author">${s.name}</p>
        </div>
      </li>`)})}function ke(){new Z(".feedback-swiper",{loop:!0,pagination:{el:".custom-pagination",clickable:!0,renderBullet:(e,t)=>`<span class="${t}"></span>`},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}})}const O=document.querySelector("#open-feedback");O&&O.addEventListener("click",()=>{Le()});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector("[data-menu-open]"),t=document.querySelector("[data-menu-close]"),s=document.querySelector("[data-menu]"),n=document.querySelectorAll("[data-menu-link]"),o=document.body;e&&e.addEventListener("click",r),t&&t.addEventListener("click",a),s&&s.addEventListener("click",function(l){l.target===s&&a()}),document.addEventListener("keydown",function(l){l.key==="Escape"&&s.classList.contains("is-open")&&a()}),n.forEach(l=>{l.addEventListener("click",function(c){const d=this.getAttribute("href");d.startsWith("#")&&(c.preventDefault(),a(),setTimeout(()=>{const h=document.querySelector(d);if(h){const u=document.querySelector(".header").offsetHeight,g=h.offsetTop-u-10;window.scrollTo({top:g,behavior:"smooth"})}},300))})});function r(){s.classList.add("is-open"),o.classList.add("menu-open")}function a(){s.classList.remove("is-open"),o.classList.remove("menu-open")}});
//# sourceMappingURL=index.js.map
