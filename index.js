import{a as m,S as x}from"./assets/vendor-CCfgLW0g.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const o={modal:document.querySelector(".modal"),artistDataLoader:document.getElementById("artistDataLoader"),artistDataSpinner:document.querySelector("#artistDataLoader .spinner"),artist:{name:document.querySelector(".artist-name"),thumb:document.querySelector(".artist-thumb"),years:document.querySelector(".artist-years"),gender:document.querySelector(".artist-gender"),members:document.querySelector(".artist-members"),country:document.querySelector(".artist-country"),bio:document.querySelector(".artist-bio"),genres:document.querySelector(".artist-genres")},albums:{container:document.querySelector(".albums-container")},artistCardSection:document.querySelector(".artist-card")};function p(){o.modal.classList.add("modal--hidden"),document.body.classList.remove("no-scroll")}function H(){const e=document.querySelector(".modal__close-button"),t=document.querySelector(".modal");e&&e.addEventListener("click",p),t&&t.addEventListener("click",n=>{n.target===t&&p()}),document.addEventListener("keydown",n=>{n.key==="Escape"&&!o.modal.classList.contains("modal--hidden")&&p()})}async function O(e){if(!e)throw new Error("Artist ID is required");const[t,n]=await Promise.all([m.get(`https://sound-wave.b.goit.study/api/artists/${e}`),m.get("https://sound-wave.b.goit.study/api/artists")]),r=t.data,s=n.data.artists||[];if(!(r!=null&&r.strArtist))throw new Error("No artist data");console.log("üîç artistId:",e);const a=s.find(i=>i._id===e);return a?a.genres&&(r.genres=a.genres):console.warn("‚ö†Ô∏è Artist not found in allArtists:",e),r}function F(e){const{name:t,thumb:n,years:r,gender:s,members:a,country:i,bio:c}=o.artist;t.textContent=e.strArtist??"No name",n.src=e.strArtistThumb||"https://via.placeholder.com/200x200?text=No+Image",n.alt=`Artist photo ${e.strArtist??""}`,c.textContent=e.strBiographyEN??"No description",r.textContent=e.intFormedYear?`${e.intFormedYear} - ${e.intDiedYear||"present"}`:"No data",s.textContent=e.strGender||"No data",a.textContent=e.intMembers||"No data",i.textContent=e.strCountry||"No data"}function P(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),r=t%60;return`${n}:${r.toString().padStart(2,"0")}`}function R(e,t){return e.reduce((n,r)=>{if(r.strArtist!==t)return n;const s=r.strAlbum||"Unknown Album";return n[s]||(n[s]=[]),n[s].push(r),n},{})}function j(e,t){const n=o.albums.container;if(!n)return;const r=R(e,t);n.innerHTML="";const s=document.createElement("ul");s.classList.add("albums__card-list");for(const[a,i]of Object.entries(r)){const c=document.createElement("li");c.className="albums__name-item albums-name";const h=document.createElement("h4");h.className="albums__name-title",h.textContent=a,c.appendChild(h);const f=document.createElement("div");f.className="albums__track-option";const b=document.createElement("ul");b.className="albums__track-list-option",b.innerHTML=`
      <li class="albums__track-item">track</li>
      <li class="albums__time-item">time</li>
      <li class="albums__link-item">link</li>
    `,f.appendChild(b),i.forEach(d=>{const y=document.createElement("ul");y.className="albums__track-list";const v=document.createElement("li");v.className="albums__track-name",v.textContent=d.strTrack||"";const L=document.createElement("li");L.className="albums__trak-time",L.textContent=d.intDuration?P(d.intDuration):"";const E=document.createElement("li");if(E.className="albums__trak-link",d.movie){const u=document.createElement("a");u.href=d.movie,u.target="_blank",u.rel="noopener noreferrer",u.innerHTML=`
        <svg width="16" height="16">
          <use href="icons.svg#icon-youtube"></use>
        </svg>`,E.appendChild(u)}y.append(v,L,E),f.appendChild(y)}),c.appendChild(f),s.appendChild(c)}n.appendChild(s)}function G(e,t){if(!(e instanceof HTMLElement)){console.error("container not DOM-element:",e);return}if(console.log("container:",e),console.log("genres:",t),e.innerHTML="",t&&t.length>0)t.forEach(n=>{const r=document.createElement("span");r.classList.add("artist-card__genres-item"),r.textContent=n,e.appendChild(r),console.log("Added genre:",n)});else{const n=document.createElement("span");n.classList.add("artist-card__genres-item"),n.textContent="Genres not available",e.appendChild(n)}}function Y(){if(!o.artistDataLoader||!o.artistCardSection){console.error("DOM references for loader are not found!");return}o.artistDataLoader.classList.remove("loader-hidden"),o.artistDataLoader.classList.add("loader-visible"),o.artistCardSection.classList.add("hidden")}function U(){if(!o.artistDataLoader||!o.artistCardSection){console.error("DOM references for loader are not found!");return}o.artistDataLoader.classList.remove("loader-visible"),o.artistDataLoader.classList.add("loader-hidden"),o.artistCardSection.classList.remove("hidden")}const S={showArtistLoader:Y,hideArtistLoader:U};async function W(e){S.showArtistLoader();try{o.modal.classList.remove("modal--hidden"),document.body.classList.add("no-scroll");const t=await O(e);V(),F(t),j(t.tracksList,t.strArtist);const n=t.genres||[];console.log("üß™ genres container:",o.artist.genres),G(o.artist.genres,n)}catch(t){console.error("Error to load artist data:",t.message,t),alert("Artist data not found"),p()}finally{S.hideArtistLoader()}}function V(){o.albumsContainer&&(o.albumsContainer.innerHTML=""),o.genres&&(o.genres.innerHTML=""),o.artistInfoContainer&&(o.artistInfoContainer.innerHTML="")}H();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".open-artist-modal");e&&e.addEventListener("click",async()=>{const t=e.dataset.artistId;console.log("‚ñ∂Ô∏è ID –¥–ª—è –º–æ–¥–∞–ª–∫–∏:",t),await W(t)})});document.getElementById("exploreBtn").addEventListener("click",function(){document.getElementById("artists").scrollIntoView({behavior:"smooth"})});async function M(e=1){try{return(await m.get(`https://sound-wave.b.goit.study/api/artists?limit=8&page=${e}`)).data.artists}catch(t){console.log(t)}}const A=document.querySelector(".artists-list");let k=0;z();async function z(){const e=await M(),t=_(e);A.innerHTML=t,k=1}const g=document.querySelector(".artists-load-more-btn");g.addEventListener("click",J);async function J(){try{X(),g.style.display="none",k+=1;const e=await M(k);e.length===0&&(g.style.display="none");const t=_(e);A.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}finally{Z(),g.style.display="flex"}}function K(e,t){if(typeof e!="string")return"";const n=window.innerWidth;return n<768?t=60:n<1440?t=160:t=144,e.length>t?e.slice(0,t)+"...":e}function Q(e){return e.replace(/[,/]/g," ")}function _(e){return e.map(({_id:t,genres:n,strArtist:r,strArtistThumb:s,strBiographyEN:a})=>`
      <li class="artists-card-item">

        <img class="artists-image" src="${s}" alt="${r}"/>

        <ul class="artists-genres-list">
        ${n.map(i=>`<li class="artists-genres-item">${Q(i)}</li>`).join("")}
        </ul>
        <p class="artists-name">${r}</p>
        <p class="artists-information">${K(a,144)}</p>
       <button class="artists-learn-more-card-btn open-artist-modal btn-click" data-artist-id="${t}">
       Learn More
        <svg class="caret-right-icon" width="24" height="24" >
        <use href="./img/artists.svg#icon-caret-right"></use>
        </svg>

       </button>
     </li>
      `).join("")||""}document.addEventListener("click",e=>{const t=e.target.closest(".open-artist-modal");if(t){const n=t.dataset.artistId;n?openModal(n):(console.error("Artist ID not found on the button"),alert("Failed to determine the artist ID"))}});const D=document.querySelector(".loader");function X(){D.classList.remove("visually-hidden")}function Z(){D.classList.add("visually-hidden")}const ee=document.querySelector(".modal-feedback-section"),w=document.querySelector(".modal-feedback-form"),l=document.querySelectorAll(".modal-feedback-stars"),I=document.querySelector(".modal-feedback-close");function q(e){const t=parseInt(e.currentTarget.dataset.value,10);l.forEach(r=>{const s=parseInt(r.dataset.value,10);r.classList.toggle("filled",s<=t)});const n=document.getElementById("radio-${rating}");n&&(n.checked=!0)}function $(e){e.preventDefault();const t=e.currentTarget,n={name:t.elements.modalFeedbackName.value.trim(),message:t.elements.modalFeedbackMessage.value.trim(),rating:t.elements.star.value};if(!n.name||!n.message||!n.rating){alert("Fill all fields");return}console.log(n),w.reset(),l.forEach(r=>{r.classList.remove("filled")})}function N(e){const t=parseInt(e.currentTarget.dataset.value,10);l.forEach(n=>{const r=parseInt(n.dataset.value,10);n.classList.toggle("hovered",r<=t)})}function T(){l.forEach(e=>e.classList.remove("hovered"))}document.body.style.overflow="hidden";w.addEventListener("submit",$);I.addEventListener("click",B);l.forEach(e=>{e.addEventListener("click",q),e.addEventListener("mouseover",N),e.addEventListener("mouseout",T)});function B(){document.body.style.overflow="",ee.classList.add("visually-hidden"),w.removeEventListener("submit",$),I.removeEventListener("click",B),l.forEach(e=>{e.removeEventListener("click",q),e.removeEventListener("mouseover",N),e.removeEventListener("mouseout",T)})}document.addEventListener("DOMContentLoaded",async()=>{(await te()).length>=3&&re()});m.defaults.baseURL="https://sound-wave.b.goit.study/api/";async function te(){try{const e=await m.get("https://sound-wave.b.goit.study/api/feedbacks",{params:{limit:3,page:1}}),t=Array.isArray(e.data)?e.data:e.data.data;return console.log("–û—Ç—Ä–∏–º–∞–Ω–æ –≤—ñ–¥–≥—É–∫—ñ–≤:",t),!Array.isArray(t)||t.length===0?(console.warn("–°–ø–∏—Å–æ–∫ –≤—ñ–¥–≥—É–∫—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π."),[]):(ne(t),t)}catch(e){return console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –≤—ñ–¥–≥—É–∫—ñ–≤:",e),document.getElementById("feedback-container").innerHTML='<li class="swiper-slide"><p>–í—ñ–¥–≥—É–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ.</p></li>',[]}}function ne(e){const t=document.getElementById("feedback-container");t.innerHTML="",e.forEach(n=>{const r=Math.round(n.rating);t.insertAdjacentHTML("beforeend",`
      <li class="swiper-slide">
        <div class="feedback-card">
          <div class="rating value-${r}" aria-label="Rating: ${r} –∑ 5"></div>
          <p class="feedback-text">${n.descr}</p>
          <p class="feedback-author">${n.name}</p>
        </div>
      </li>`)})}function re(){new x(".feedback-swiper",{loop:!0,pagination:{el:".custom-pagination",clickable:!0,renderBullet:(e,t)=>`<span class="${t}"></span>`},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}})}const C=document.querySelector("#open-feedback");C&&C.addEventListener("click",()=>{});const se=document.getElementById("modal"),oe=document.getElementById("modal-close");oe.addEventListener("click",()=>{se.classList.remove("active")});
//# sourceMappingURL=index.js.map
