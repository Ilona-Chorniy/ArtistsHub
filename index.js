import{a as E}from"./assets/vendor-B2YOV0tR.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const o={modal:document.querySelector(".modal"),artistDataLoader:document.getElementById("artistDataLoader"),artistDataSpinner:document.querySelector("#artistDataLoader .spinner"),artist:{name:document.querySelector(".artist-name"),thumb:document.querySelector(".artist-thumb"),years:document.querySelector(".artist-years"),gender:document.querySelector(".artist-gender"),members:document.querySelector(".artist-members"),country:document.querySelector(".artist-country"),bio:document.querySelector(".artist-bio"),genres:document.querySelector(".artist-genres")},albums:{container:document.querySelector(".albums-container")},artistCardSection:document.querySelector(".artist-card")};function f(){o.modal.classList.add("modal--hidden"),document.body.classList.remove("no-scroll")}function B(){const e=document.querySelector(".modal__close-button"),t=document.querySelector(".modal");e&&e.addEventListener("click",f),t&&t.addEventListener("click",n=>{n.target===t&&f()}),document.addEventListener("keydown",n=>{n.key==="Escape"&&!o.modal.classList.contains("modal--hidden")&&f()})}async function O(e){if(!e)throw new Error("Artist ID is required");const[t,n]=await Promise.all([E.get(`https://sound-wave.b.goit.study/api/artists/${e}`),E.get("https://sound-wave.b.goit.study/api/artists")]),r=t.data,s=n.data.artists||[];if(!(r!=null&&r.strArtist))throw new Error("No artist data");console.log("üîç artistId:",e);const a=s.find(i=>i._id===e);return a?a.genres&&(r.genres=a.genres):console.warn("‚ö†Ô∏è Artist not found in allArtists:",e),r}function x(e){const{name:t,thumb:n,years:r,gender:s,members:a,country:i,bio:c}=o.artist;t.textContent=e.strArtist??"No name",n.src=e.strArtistThumb||"https://via.placeholder.com/200x200?text=No+Image",n.alt=`Artist photo ${e.strArtist??""}`,c.textContent=e.strBiographyEN??"No description",r.textContent=e.intFormedYear?`${e.intFormedYear} - ${e.intDiedYear||"present"}`:"No data",s.textContent=e.strGender||"No data",a.textContent=e.intMembers||"No data",i.textContent=e.strCountry||"No data"}function H(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),r=t%60;return`${n}:${r.toString().padStart(2,"0")}`}function F(e,t){return e.reduce((n,r)=>{if(r.strArtist!==t)return n;const s=r.strAlbum||"Unknown Album";return n[s]||(n[s]=[]),n[s].push(r),n},{})}function P(e,t){const n=o.albums.container;if(!n)return;const r=F(e,t);n.innerHTML="";const s=document.createElement("ul");s.classList.add("albums__card-list");for(const[a,i]of Object.entries(r)){const c=document.createElement("li");c.className="albums__name-item albums-name";const g=document.createElement("h4");g.className="albums__name-title",g.textContent=a,c.appendChild(g);const m=document.createElement("div");m.className="albums__track-option";const h=document.createElement("ul");h.className="albums__track-list-option",h.innerHTML=`
      <li class="albums__track-item">track</li>
      <li class="albums__time-item">time</li>
      <li class="albums__link-item">link</li>
    `,m.appendChild(h),i.forEach(d=>{const y=document.createElement("ul");y.className="albums__track-list";const v=document.createElement("li");v.className="albums__track-name",v.textContent=d.strTrack||"";const b=document.createElement("li");b.className="albums__trak-time",b.textContent=d.intDuration?H(d.intDuration):"";const L=document.createElement("li");if(L.className="albums__trak-link",d.movie){const u=document.createElement("a");u.href=d.movie,u.target="_blank",u.rel="noopener noreferrer",u.innerHTML=`
        <svg width="16" height="16">
          <use href="icons.svg#icon-youtube"></use>
        </svg>`,L.appendChild(u)}y.append(v,b,L),m.appendChild(y)}),c.appendChild(m),s.appendChild(c)}n.appendChild(s)}function j(e,t){if(!(e instanceof HTMLElement)){console.error("container not DOM-element:",e);return}if(console.log("container:",e),console.log("genres:",t),e.innerHTML="",t&&t.length>0)t.forEach(n=>{const r=document.createElement("span");r.classList.add("artist-card__genres-item"),r.textContent=n,e.appendChild(r),console.log("Added genre:",n)});else{const n=document.createElement("span");n.classList.add("artist-card__genres-item"),n.textContent="Genres not available",e.appendChild(n)}}function G(){if(!o.artistDataLoader||!o.artistCardSection){console.error("DOM references for loader are not found!");return}o.artistDataLoader.classList.remove("loader-hidden"),o.artistDataLoader.classList.add("loader-visible"),o.artistCardSection.classList.add("hidden")}function R(){if(!o.artistDataLoader||!o.artistCardSection){console.error("DOM references for loader are not found!");return}o.artistDataLoader.classList.remove("loader-visible"),o.artistDataLoader.classList.add("loader-hidden"),o.artistCardSection.classList.remove("hidden")}const k={showArtistLoader:G,hideArtistLoader:R};async function Y(e){k.showArtistLoader();try{o.modal.classList.remove("modal--hidden"),document.body.classList.add("no-scroll");const t=await O(e);W(),x(t),P(t.tracksList,t.strArtist);const n=t.genres||[];console.log("üß™ genres container:",o.artist.genres),j(o.artist.genres,n)}catch(t){console.error("Error to load artist data:",t.message,t),alert("Artist data not found"),f()}finally{k.hideArtistLoader()}}function W(){o.albumsContainer&&(o.albumsContainer.innerHTML=""),o.genres&&(o.genres.innerHTML=""),o.artistInfoContainer&&(o.artistInfoContainer.innerHTML="")}B();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".open-artist-modal");e&&e.addEventListener("click",async()=>{const t=e.dataset.artistId;console.log("‚ñ∂Ô∏è ID –¥–ª—è –º–æ–¥–∞–ª–∫–∏:",t),await Y(t)})});document.getElementById("exploreBtn").addEventListener("click",function(){document.getElementById("artists").scrollIntoView({behavior:"smooth"})});async function M(e=1){try{return(await E.get(`https://sound-wave.b.goit.study/api/artists?limit=8&page=${e}`)).data.artists}catch(t){console.log(t)}}const _=document.querySelector(".artists-list");let C=0;U();async function U(){const e=await M(),t=A(e);_.innerHTML=t,C=1}const p=document.querySelector(".artists-load-more-btn");p.addEventListener("click",V);async function V(){try{K(),p.style.display="none",C+=1;const e=await M(C);e.length===0&&(p.style.display="none");const t=A(e);_.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}finally{Q(),p.style.display="flex"}}function z(e,t){if(typeof e!="string")return"";const n=window.innerWidth;return n<768?t=60:n<1440?t=160:t=144,e.length>t?e.slice(0,t)+"...":e}function J(e){return e.replace(/[,/]/g," ")}function A(e){return e.map(({_id:t,genres:n,strArtist:r,strArtistThumb:s,strBiographyEN:a})=>`
      <li class="artists-card-item">

        <img class="artists-image" src="${s}" alt="${r}"/>

        <ul class="artists-genres-list">
        ${n.map(i=>`<li class="artists-genres-item">${J(i)}</li>`).join("")}
        </ul>
        <p class="artists-name">${r}</p>
        <p class="artists-information">${z(a,144)}</p>
       <button class="artists-learn-more-card-btn open-artist-modal btn-click" data-artist-id="${t}">
       Learn More
        <svg class="caret-right-icon" width="24" height="24" >
        <use href="/img/artists-icons/symbol-defs.svg#icon-caret-right"></use>
        </svg>

       </button>
     </li>
      `).join("")||""}document.addEventListener("click",e=>{const t=e.target.closest(".open-artist-modal");if(t){const n=t.dataset.artistId;n?openModal(n):(console.error("Artist ID not found on the button"),alert("Failed to determine the artist ID"))}});const w=document.querySelector(".loader");function K(){w.classList.remove("visually-hidden")}function Q(){w.classList.add("visually-hidden")}const X=document.getElementById("modal"),Z=document.getElementById("modal-close");Z.addEventListener("click",()=>{X.classList.remove("active")});const ee=document.querySelector(".modal-feedback-section"),S=document.querySelector(".modal-feedback-form"),l=document.querySelectorAll(".modal-feedback-stars"),D=document.querySelector(".modal-feedback-close");function q(e){const t=parseInt(e.currentTarget.dataset.value,10);l.forEach(r=>{const s=parseInt(r.dataset.value,10);r.classList.toggle("filled",s<=t)});const n=document.getElementById("radio-${rating}");n&&(n.checked=!0)}function I(e){e.preventDefault();const t=e.currentTarget,n={name:t.elements.modalFeedbackName.value.trim(),message:t.elements.modalFeedbackMessage.value.trim(),rating:t.elements.star.value};if(!n.name||!n.message||!n.rating){alert("Fill all fields");return}console.log(n),S.reset(),l.forEach(r=>{r.classList.remove("filled")})}function N(e){const t=parseInt(e.currentTarget.dataset.value,10);l.forEach(n=>{const r=parseInt(n.dataset.value,10);n.classList.toggle("hovered",r<=t)})}function $(){l.forEach(e=>e.classList.remove("hovered"))}document.body.style.overflow="hidden";S.addEventListener("submit",I);D.addEventListener("click",T);l.forEach(e=>{e.addEventListener("click",q),e.addEventListener("mouseover",N),e.addEventListener("mouseout",$)});function T(){document.body.style.overflow="",ee.classList.add("visually-hidden"),S.removeEventListener("submit",I),D.removeEventListener("click",T),l.forEach(e=>{e.removeEventListener("click",q),e.removeEventListener("mouseover",N),e.removeEventListener("mouseout",$)})}
//# sourceMappingURL=index.js.map
