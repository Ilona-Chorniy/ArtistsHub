import{a as k,S as ee}from"./assets/vendor-Breb73Hu.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",function(s){const n=this.getAttribute("href");if(n.startsWith("#")){s.preventDefault();const o=document.querySelector(n);if(o){const r=document.querySelector(".header").offsetHeight,a=o.offsetTop-r-10;window.scrollTo({top:a,behavior:"smooth"})}}})})});document.getElementById("exploreBtn").addEventListener("click",function(){document.getElementById("artists").scrollIntoView({behavior:"smooth"})});const i={modal:document.querySelector(".modal"),artistDataLoader:document.getElementById("artistDataLoader"),artistDataSpinner:document.querySelector("#artistDataLoader .spinner"),artist:{name:document.querySelector(".artist-name"),thumb:document.querySelector(".artist-thumb"),years:document.querySelector(".artist-years"),gender:document.querySelector(".artist-gender"),members:document.querySelector(".artist-members"),country:document.querySelector(".artist-country"),bio:document.querySelector(".artist-bio"),genres:document.querySelector(".artist-genres")},albums:{container:document.querySelector(".albums-container")},artistCardSection:document.querySelector(".artist-card")};function S(){i.modal.classList.add("modal--hidden"),document.body.classList.remove("no-scroll"),document.body.style.overflow="",document.documentElement.style.overflow="",document.removeEventListener("keydown",F)}function te(){const e=document.querySelector(".modal__close-button"),t=document.querySelector(".modal");e&&e.addEventListener("click",S),t&&t.addEventListener("click",s=>{s.target===t&&S()})}function F(e){e.key==="Escape"&&!i.modal.classList.contains("modal--hidden")&&S()}async function se(e){if(!e)throw new Error("Artist ID is required");const[t,s]=await Promise.all([k.get(`https://sound-wave.b.goit.study/api/artists/${e}`),k.get("https://sound-wave.b.goit.study/api/artists")]),n=t.data,o=s.data.artists||[];if(!(n!=null&&n.strArtist))throw new Error("No artist data");console.log("üîç artistId:",e);const r=o.find(a=>a._id===e);return r?r.genres&&(n.genres=r.genres):console.warn("‚ö†Ô∏è Artist not found in allArtists:",e),n}function ne(e){const{name:t,thumb:s,years:n,gender:o,members:r,country:a,bio:l}=i.artist;t.textContent=e.strArtist??"No name",s.src=e.strArtistThumb||"https://via.placeholder.com/200x200?text=No+Image",s.alt=`Artist photo ${e.strArtist??""}`,l.textContent=e.strBiographyEN??"No description",n.textContent=e.intFormedYear?`${e.intFormedYear} - ${e.intDiedYear||"present"}`:"No data",o.textContent=e.strGender||"No data",r.textContent=e.intMembers||"No data",a.textContent=e.strCountry||"No data"}function oe(e){const t=Math.floor(e/1e3),s=Math.floor(t/60),n=t%60;return`${s}:${n.toString().padStart(2,"0")}`}function re(e,t){return e.reduce((s,n)=>{if(n.strArtist!==t)return s;const o=n.strAlbum||"Unknown Album";return s[o]||(s[o]=[]),s[o].push(n),s},{})}function ae(e,t){const s=i.albums.container;if(!s)return;const n=re(e,t);s.innerHTML="";const o=document.createElement("ul");o.classList.add("albums__card-list");for(const[r,a]of Object.entries(n)){const l=document.createElement("li");l.className="albums__name-item albums-name";const c=document.createElement("h4");c.className="albums__name-title",c.textContent=r,l.appendChild(c);const d=document.createElement("div");d.className="albums__track-option";const h=document.createElement("ul");h.className="albums__track-list-option",h.innerHTML=`
      <li class="albums__track-item">track</li>
      <li class="albums__time-item">time</li>
      <li class="albums__link-item">link</li>
    `,d.appendChild(h),a.forEach(u=>{const g=document.createElement("ul");g.className="albums__track-list";const b=document.createElement("li");b.className="albums__track-name",b.textContent=u.strTrack||"";const A=document.createElement("li");A.className="albums__trak-time",A.textContent=u.intDuration?oe(u.intDuration):"";const C=document.createElement("li");if(C.className="albums__trak-link",u.movie){const E=document.createElement("a");E.href=u.movie,E.target="_blank",E.rel="noopener noreferrer",E.innerHTML=`
        <svg width="16" height="16">
          <use href="icons.svg#icon-youtube"></use>
        </svg>`,C.appendChild(E)}g.append(b,A,C),d.appendChild(g)}),l.appendChild(d),o.appendChild(l)}s.appendChild(o)}function ie(e,t){if(!(e instanceof HTMLElement)){console.error("container not DOM-element:",e);return}if(console.log("container:",e),console.log("genres:",t),e.innerHTML="",t&&t.length>0)t.forEach(s=>{const n=document.createElement("span");n.classList.add("artist-card__genres-item"),n.textContent=s,e.appendChild(n),console.log("Added genre:",s)});else{const s=document.createElement("span");s.classList.add("artist-card__genres-item"),s.textContent="Genres not available",e.appendChild(s)}}function ce(){if(!i.artistDataLoader||!i.artistCardSection){console.error("DOM references for loader are not found!");return}document.querySelector("#globalLoader").classList.remove("hidden"),i.artistDataLoader.classList.remove("loader-hidden"),i.artistDataLoader.classList.add("loader-visible"),i.artistCardSection.classList.add("hidden")}function le(){if(!i.artistDataLoader||!i.artistCardSection){console.error("DOM references for loader are not found!");return}document.querySelector("#globalLoader").classList.add("hidden"),i.artistDataLoader.classList.remove("loader-visible"),i.artistDataLoader.classList.add("loader-hidden"),i.artistCardSection.classList.remove("hidden")}const T={showArtistLoader:ce,hideArtistLoader:le};async function de(e){try{T.showArtistLoader();const t=await se(e),s=t.genres||[];console.log("üß™ genres container:",i.artist.genres),ue(),ne(t),ae(t.tracksList,t.strArtist),ie(i.artist.genres,s),T.hideArtistLoader(),i.modal.classList.remove("modal--hidden"),document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",document.addEventListener("keydown",F)}catch(t){console.error("Error to load artist data:",t.message,t),T.hideArtistLoader(),alert("Artist data not found"),S()}finally{}}function ue(){i.albumsContainer&&(i.albumsContainer.innerHTML=""),i.genres&&(i.genres.innerHTML=""),i.artistInfoContainer&&(i.artistInfoContainer.innerHTML="")}te();async function x(e=1){try{return(await k.get(`https://sound-wave.b.goit.study/api/artists?limit=8&page=${e}`)).data.artists}catch(t){console.log(t)}}const B=document.querySelector(".artists-list");let D=0;me();async function me(){const e=await x(),t=P(e);B.innerHTML=t,D=1}const w=document.querySelector(".artists-load-more-btn");w.addEventListener("click",fe);async function fe(){try{ve(),w.style.display="none",D+=1;const e=await x(D);e.length===0&&(w.style.display="none");const t=P(e);B.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}finally{Le(),w.style.display="flex"}}function pe(e,t){if(typeof e!="string")return"";const s=window.innerWidth;return s<768?t=60:s<1440?t=160:t=144,e.length>t?e.slice(0,t)+"...":e}function he(e){return e.replace(/[,/]/g," ")}function P(e){return e.map(({_id:t,genres:s,strArtist:n,strArtistThumb:o,strBiographyEN:r})=>`
      <li class="artists-card-item">

        <img class="artists-image" src="${o}" alt="${n}"/>

        <ul class="artists-genres-list">
        ${s.map(a=>`<li class="artists-genres-item">${he(a)}</li>`).join("")}
        </ul>
        <p class="artists-name">${n}</p>
        <p class="artists-information">${pe(r,144)}</p>
       <button class="artists-learn-more-card-btn open-artist-modal" data-artist-id="${t}">
       Learn More
        <svg class="caret-right-icon" width="8" height="16" >
        <use href="icons.svg#icon-caret-right"></use>
        </svg>
       </button>
     </li>
      `).join("")||""}B.addEventListener("click",ye);function ye(e){const t=e.target.closest(".open-artist-modal");if(t){const s=t.dataset.artistId;s?de(s):console.error("Artist ID not found on the clicked button.")}}const R=document.querySelector(".loader");function ve(){R.classList.remove("visually-hidden")}function Le(){R.classList.add("visually-hidden")}const j=document.querySelector(".modal-feedback-backdrop"),W=document.querySelector(".modal-feedback-wrapper"),y=document.querySelector(".modal-feedback-form"),G=document.querySelector(".data-wrapper"),p=document.querySelectorAll(".modal-feedback-stars"),Y=document.querySelector(".modal-feedback-close"),H=document.querySelector(".modal-feedback-backdrop"),U=document.querySelector(".modal-feedback-submit"),M=document.querySelector(".success"),q=document.querySelector(".fail"),m=document.querySelector(".smiley"),_=document.querySelector(".notifications"),I=document.querySelector(".name-error"),N=document.querySelector(".message-error"),$=document.querySelector(".rating-error");let v=null,f=null;function J(e){e.target===H&&L()}function V(e){e.key==="Escape"&&L()}function z(e){const t=parseInt(e.currentTarget.dataset.value,10);p.forEach(n=>{const o=parseInt(n.dataset.value,10);n.classList.toggle("filled",o<=t)});const s=document.getElementById(`radio-${t}`);s&&(s.checked=!0)}async function K(e){var l;e.preventDefault();const t=e.currentTarget,s=t.elements.modalFeedbackName,n=t.elements.modalFeedbackMessage,o=t.elements.star,r=(l=Array.from(o).find(c=>c.checked))==null?void 0:l.value,a={name:s.value.trim(),descr:n.value.trim(),rating:Number(r)};if(s.classList.remove("input-error"),I.classList.remove("is-onscreen"),a.name.length<2||a.name.length>16){s.classList.add("input-error"),I.classList.add("is-onscreen");return}if(n.classList.remove("input-error"),N.classList.remove("is-onscreen"),a.descr.length<10||a.descr.length>512){n.classList.add("input-error"),N.classList.add("is-onscreen");return}if($.classList.remove("is-onscreen"),!a.rating){$.classList.add("is-onscreen");return}try{const c=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!c.ok)throw new Error("Something went wrong: "+c.status);const d=await c.json();console.log(d.message||"Feedback submitted!"),console.log(a),f=setTimeout(()=>{_.classList.remove("visually-hidden"),M.classList.remove("visually-hidden"),M.classList.add("is-onscreen"),m.classList.remove("visually-hidden","normal"),m.classList.add("is-onscreen","happy")},1200)}catch(c){console.error(c),f=setTimeout(()=>{_.classList.remove("visually-hidden"),q.classList.remove("visually-hidden"),q.classList.add("is-onscreen"),m.classList.remove("visually-hidden"),m.classList.add("is-onscreen")},1200)}finally{try{G.classList.add("slide-out-elliptic-bottom-bck"),U.classList.add("submited"),W.classList.add("submited"),y.reset(),p.forEach(c=>c.classList.remove("filled")),v=setTimeout(()=>{L()},5e3)}catch(c){L(),console.log(c)}}}function Q(e){const t=parseInt(e.currentTarget.dataset.value,10);p.forEach(s=>{const n=parseInt(s.dataset.value,10);s.classList.toggle("hovered",n<=t)})}function X(){p.forEach(e=>e.classList.remove("hovered"))}function ge(){v&&(clearTimeout(v),v=null),f&&(clearTimeout(f),f=null),be(),document.documentElement.style.overflow="hidden",document.documentElement.style.scrollbarGutter="stable",document.body.style.overflow="hidden",j.classList.toggle("is-open"),y.addEventListener("submit",K),Y.addEventListener("click",L),H.addEventListener("click",J),window.addEventListener("keydown",V),p.forEach(e=>{e.addEventListener("click",z),e.addEventListener("mouseover",Q),e.addEventListener("mouseout",X)})}function L(){Z(),document.documentElement.style.overflow="",document.documentElement.style.scrollbarGutter="",document.body.style.overflow="",document.body.style.paddingRight="",j.classList.toggle("is-open"),y.removeEventListener("submit",K),Y.removeEventListener("click",L),H.removeEventListener("click",J),window.removeEventListener("keydown",V),p.forEach(e=>{e.removeEventListener("click",z),e.removeEventListener("mouseover",Q),e.removeEventListener("mouseout",X)})}function be(){const e=y.elements.modalFeedbackName,t=y.elements.modalFeedbackMessage;Z(),I.classList.remove("is-onscreen"),N.classList.remove("is-onscreen"),$.classList.remove("is-onscreen"),e.classList.remove("input-error"),t.classList.remove("input-error"),_.classList.add("visually-hidden"),M.classList.add("visually-hidden"),M.classList.remove("is-onscreen"),q.classList.add("visually-hidden"),q.classList.remove("is-onscreen"),m.classList.add("visually-hidden"),m.classList.remove("is-onscreen","happy"),m.classList.add("normal"),G.classList.remove("slide-out-elliptic-bottom-bck"),U.classList.remove("submited"),W.classList.remove("submited"),y.reset(),p.forEach(s=>s.classList.remove("filled","hovered"))}function Z(){clearTimeout(v),clearTimeout(f),v=null,f=null}document.addEventListener("DOMContentLoaded",async()=>{(await Ee()).length>=3&&we()});k.defaults.baseURL="https://sound-wave.b.goit.study/api";async function Ee(){try{const e=await k.get("/feedbacks",{params:{limit:25,page:1}}),t=Array.isArray(e.data)?e.data:e.data.data;return console.log("–£—Å—ñ –≤—ñ–¥–≥—É–∫–∏ –∑ –±–µ–∫–µ–Ω–¥—É:",t),!Array.isArray(t)||t.length===0?(console.warn("–°–ø–∏—Å–æ–∫ –≤—ñ–¥–≥—É–∫—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π."),[]):(ke(t),t)}catch(e){return console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –≤—ñ–¥–≥—É–∫—ñ–≤:",e),document.getElementById("feedback-container").innerHTML='<li class="swiper-slide"><p>–í—ñ–¥–≥—É–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ.</p></li>',[]}}function ke(e){const t=document.getElementById("feedback-container");t.innerHTML="",e.forEach(s=>{const n=Math.round(s.rating);t.insertAdjacentHTML("beforeend",`
      <li class="swiper-slide">
        <div class="feedback-card">
          <div class="rating value-${n}" aria-label="Rating: ${n} –∑ 5"></div>
          <p class="feedback-text">${s.descr}</p>
          <p class="feedback-author">${s.name}</p>
        </div>
      </li>`)})}function we(){new ee(".feedback-swiper",{speed:1e3,loop:!0,pagination:{el:".custom-pagination",clickable:!0,renderBullet:(e,t)=>e<3?`<span class="${t}"></span>`:""},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}})}const O=document.querySelector("#open-feedback");O&&O.addEventListener("click",()=>{ge()});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector("[data-menu-open]"),t=document.querySelector("[data-menu-close]"),s=document.querySelector("[data-menu]"),n=document.querySelectorAll("[data-menu-link]"),o=document.body;e&&e.addEventListener("click",r),t&&t.addEventListener("click",a),s&&s.addEventListener("click",function(c){c.target===s&&a()}),n.forEach(c=>{c.addEventListener("click",function(d){const h=this.getAttribute("href");h.startsWith("#")&&(d.preventDefault(),a(),setTimeout(()=>{const u=document.querySelector(h);if(u){const g=document.querySelector(".header").offsetHeight,b=u.offsetTop-g-10;window.scrollTo({top:b,behavior:"smooth"})}},300))})});function r(){s.classList.add("is-open"),o.classList.add("menu-open"),document.documentElement.style.overflow="hidden",document.addEventListener("keydown",l)}function a(){s.classList.remove("is-open"),o.classList.remove("menu-open"),document.documentElement.style.overflow="",document.removeEventListener("keydown",l)}function l(c){c.key==="Escape"&&s.classList.contains("is-open")&&a()}});
//# sourceMappingURL=index.js.map
