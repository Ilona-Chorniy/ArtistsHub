import{a as g,S as X}from"./assets/vendor-CCfgLW0g.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",function(s){const n=this.getAttribute("href");if(n.startsWith("#")){s.preventDefault();const o=document.querySelector(n);if(o){const r=document.querySelector(".header").offsetHeight,a=o.offsetTop-r-10;window.scrollTo({top:a,behavior:"smooth"})}}})})});document.getElementById("exploreBtn").addEventListener("click",function(){document.getElementById("artists").scrollIntoView({behavior:"smooth"})});const i={modal:document.querySelector(".modal"),artistDataLoader:document.getElementById("artistDataLoader"),artistDataSpinner:document.querySelector("#artistDataLoader .spinner"),artist:{name:document.querySelector(".artist-name"),thumb:document.querySelector(".artist-thumb"),years:document.querySelector(".artist-years"),gender:document.querySelector(".artist-gender"),members:document.querySelector(".artist-members"),country:document.querySelector(".artist-country"),bio:document.querySelector(".artist-bio"),genres:document.querySelector(".artist-genres")},albums:{container:document.querySelector(".albums-container")},artistCardSection:document.querySelector(".artist-card")};function E(){i.modal.classList.add("modal--hidden"),document.body.classList.remove("no-scroll")}function Z(){const e=document.querySelector(".modal__close-button"),t=document.querySelector(".modal");e&&e.addEventListener("click",E),t&&t.addEventListener("click",s=>{s.target===t&&E()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&!i.modal.classList.contains("modal--hidden")&&E()})}async function ee(e){if(!e)throw new Error("Artist ID is required");const[t,s]=await Promise.all([g.get(`https://sound-wave.b.goit.study/api/artists/${e}`),g.get("https://sound-wave.b.goit.study/api/artists")]),n=t.data,o=s.data.artists||[];if(!(n!=null&&n.strArtist))throw new Error("No artist data");console.log("üîç artistId:",e);const r=o.find(a=>a._id===e);return r?r.genres&&(n.genres=r.genres):console.warn("‚ö†Ô∏è Artist not found in allArtists:",e),n}function te(e){const{name:t,thumb:s,years:n,gender:o,members:r,country:a,bio:c}=i.artist;t.textContent=e.strArtist??"No name",s.src=e.strArtistThumb||"https://via.placeholder.com/200x200?text=No+Image",s.alt=`Artist photo ${e.strArtist??""}`,c.textContent=e.strBiographyEN??"No description",n.textContent=e.intFormedYear?`${e.intFormedYear} - ${e.intDiedYear||"present"}`:"No data",o.textContent=e.strGender||"No data",r.textContent=e.intMembers||"No data",a.textContent=e.strCountry||"No data"}function se(e){const t=Math.floor(e/1e3),s=Math.floor(t/60),n=t%60;return`${s}:${n.toString().padStart(2,"0")}`}function ne(e,t){return e.reduce((s,n)=>{if(n.strArtist!==t)return s;const o=n.strAlbum||"Unknown Album";return s[o]||(s[o]=[]),s[o].push(n),s},{})}function oe(e,t){const s=i.albums.container;if(!s)return;const n=ne(e,t);s.innerHTML="";const o=document.createElement("ul");o.classList.add("albums__card-list");for(const[r,a]of Object.entries(n)){const c=document.createElement("li");c.className="albums__name-item albums-name";const h=document.createElement("h4");h.className="albums__name-title",h.textContent=r,c.appendChild(h);const d=document.createElement("div");d.className="albums__track-option";const m=document.createElement("ul");m.className="albums__track-list-option",m.innerHTML=`
      <li class="albums__track-item">track</li>
      <li class="albums__time-item">time</li>
      <li class="albums__link-item">link</li>
    `,d.appendChild(m),a.forEach(u=>{const v=document.createElement("ul");v.className="albums__track-list";const q=document.createElement("li");q.className="albums__track-name",q.textContent=u.strTrack||"";const C=document.createElement("li");C.className="albums__trak-time",C.textContent=u.intDuration?se(u.intDuration):"";const A=document.createElement("li");if(A.className="albums__trak-link",u.movie){const L=document.createElement("a");L.href=u.movie,L.target="_blank",L.rel="noopener noreferrer",L.innerHTML=`
        <svg width="16" height="16">
          <use href="/img/icons.svg#icon-youtube"></use>
        </svg>`,A.appendChild(L)}v.append(q,C,A),d.appendChild(v)}),c.appendChild(d),o.appendChild(c)}s.appendChild(o)}function re(e,t){if(!(e instanceof HTMLElement)){console.error("container not DOM-element:",e);return}if(console.log("container:",e),console.log("genres:",t),e.innerHTML="",t&&t.length>0)t.forEach(s=>{const n=document.createElement("span");n.classList.add("artist-card__genres-item"),n.textContent=s,e.appendChild(n),console.log("Added genre:",s)});else{const s=document.createElement("span");s.classList.add("artist-card__genres-item"),s.textContent="Genres not available",e.appendChild(s)}}function ae(){if(!i.artistDataLoader||!i.artistCardSection){console.error("DOM references for loader are not found!");return}i.artistDataLoader.classList.remove("loader-hidden"),i.artistDataLoader.classList.add("loader-visible"),i.artistCardSection.classList.add("hidden")}function ie(){if(!i.artistDataLoader||!i.artistCardSection){console.error("DOM references for loader are not found!");return}i.artistDataLoader.classList.remove("loader-visible"),i.artistDataLoader.classList.add("loader-hidden"),i.artistCardSection.classList.remove("hidden")}const H={showArtistLoader:ae,hideArtistLoader:ie};async function ce(e){H.showArtistLoader();try{i.modal.classList.remove("modal--hidden"),document.body.classList.add("no-scroll");const t=await ee(e);le(),te(t),oe(t.tracksList,t.strArtist);const s=t.genres||[];console.log("üß™ genres container:",i.artist.genres),re(i.artist.genres,s)}catch(t){console.error("Error to load artist data:",t.message,t),alert("Artist data not found"),E()}finally{H.hideArtistLoader()}}function le(){i.albumsContainer&&(i.albumsContainer.innerHTML=""),i.genres&&(i.genres.innerHTML=""),i.artistInfoContainer&&(i.artistInfoContainer.innerHTML="")}Z();async function F(e=1){try{return(await g.get(`https://sound-wave.b.goit.study/api/artists?limit=8&page=${e}`)).data.artists}catch(t){console.log(t)}}const $=document.querySelector(".artists-list");let T=0;de();async function de(){const e=await F(),t=x(e);$.innerHTML=t,T=1}const k=document.querySelector(".artists-load-more-btn");k.addEventListener("click",ue);async function ue(){try{he(),k.style.display="none",T+=1;const e=await F(T);e.length===0&&(k.style.display="none");const t=x(e);$.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}finally{ve(),k.style.display="flex"}}function me(e,t){if(typeof e!="string")return"";const s=window.innerWidth;return s<768?t=60:s<1440?t=160:t=144,e.length>t?e.slice(0,t)+"...":e}function fe(e){return e.replace(/[,/]/g," ")}function x(e){return e.map(({_id:t,genres:s,strArtist:n,strArtistThumb:o,strBiographyEN:r})=>`
      <li class="artists-card-item">

        <img class="artists-image" src="${o}" alt="${n}"/>

        <ul class="artists-genres-list">
        ${s.map(a=>`<li class="artists-genres-item">${fe(a)}</li>`).join("")}
        </ul>
        <p class="artists-name">${n}</p>
        <p class="artists-information">${me(r,144)}</p>
       <button class="artists-learn-more-card-btn open-artist-modal" data-artist-id="${t}">
       Learn More
        <svg class="caret-right-icon" width="8" height="16" >
        <use href="/img/artists.svg#icon-icon-caret-right"></use>
        </svg>
       </button>
     </li>
      `).join("")||""}$.addEventListener("click",pe);function pe(e){const t=e.target.closest(".open-artist-modal");if(t){const s=t.dataset.artistId;s?ce(s):console.error("Artist ID not found on the clicked button.")}}const P=document.querySelector(".loader");function he(){P.classList.remove("visually-hidden")}function ve(){P.classList.add("visually-hidden")}const j=document.querySelector(".modal-feedback-backdrop"),W=document.querySelector(".modal-feedback-wrapper"),f=document.querySelector(".modal-feedback-form"),R=document.querySelector(".data-wrapper"),p=document.querySelectorAll(".modal-feedback-stars"),G=document.querySelector(".modal-feedback-close"),B=document.querySelector(".modal-feedback-backdrop"),Y=document.querySelector(".modal-feedback-submit"),w=document.querySelector(".succes"),M=document.querySelector(".fail"),l=document.querySelector(".smiley"),_=document.querySelector(".notifications"),D=document.querySelector(".name-error"),I=document.querySelector(".message-error"),N=document.querySelector(".rating-error");let S=null,y=null;function U(e){e.target===B&&b()}function J(e){e.key==="Escape"&&b()}function V(e){const t=parseInt(e.currentTarget.dataset.value,10);p.forEach(n=>{const o=parseInt(n.dataset.value,10);n.classList.toggle("filled",o<=t)});const s=document.getElementById("radio-${rating}");s&&(s.checked=!0)}async function z(e){e.preventDefault();const t=e.currentTarget,s=t.elements.modalFeedbackName,n=t.elements.modalFeedbackMessage,o=t.elements.star,r={name:s.value.trim(),descr:n.value.trim(),rating:Number(o.value)};if(s.classList.remove("input-error"),D.classList.remove("is-onscreen"),r.name.length<2||r.name.length>16){s.classList.add("input-error"),D.classList.add("is-onscreen");return}if(n.classList.remove("input-error"),I.classList.remove("is-onscreen"),r.descr.length<10||r.descr.length>512){n.classList.add("input-error"),I.classList.add("is-onscreen");return}if(N.classList.remove("is-onscreen"),!r.rating){N.classList.add("is-onscreen");return}try{const a=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw new Error("Something went wrong: "+a.status);const c=await a.json();console.log(c.message||"Feedback submitted!"),console.log(r),y=setTimeout(()=>{_.classList.remove("visually-hidden"),w.classList.remove("visually-hidden"),w.classList.add("is-onscreen"),l.classList.remove("visually-hidden"),l.classList.remove("normal"),l.classList.add("is-onscreen"),l.classList.add("happy")},1200)}catch(a){console.error(a),y=setTimeout(()=>{_.classList.remove("visually-hidden"),M.classList.remove("visually-hidden"),M.classList.add("is-onscreen"),l.classList.remove("visually-hidden"),l.classList.add("is-onscreen")},1200)}finally{R.classList.add("slide-out-elliptic-bottom-bck"),Y.classList.add("submited"),W.classList.add("submited"),f.reset(),o.forEach(a=>a.classList.remove("filled")),S=setTimeout(()=>{b()},5500)}}function K(e){const t=parseInt(e.currentTarget.dataset.value,10);p.forEach(s=>{const n=parseInt(s.dataset.value,10);s.classList.toggle("hovered",n<=t)})}function Q(){p.forEach(e=>e.classList.remove("hovered"))}function Le(){S&&(clearTimeout(S),S=null),y&&(clearTimeout(y),y=null),ye(),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",j.classList.toggle("is-open"),f.addEventListener("submit",z),G.addEventListener("click",b),B.addEventListener("click",U),window.addEventListener("keydown",J),p.forEach(e=>{e.addEventListener("click",V),e.addEventListener("mouseover",K),e.addEventListener("mouseout",Q)})}function b(){document.documentElement.style.overflow="",document.body.style.overflow="",j.classList.toggle("is-open"),f.removeEventListener("submit",z),G.removeEventListener("click",b),B.removeEventListener("click",U),window.removeEventListener("keydown",J),p.forEach(e=>{e.removeEventListener("click",V),e.removeEventListener("mouseover",K),e.removeEventListener("mouseout",Q)})}function ye(){D.classList.remove("is-onscreen"),I.classList.remove("is-onscreen"),N.classList.remove("is-onscreen");const e=f.elements.modalFeedbackName,t=f.elements.modalFeedbackMessage;e.classList.remove("input-error"),t.classList.remove("input-error"),_.classList.add("visually-hidden"),w.classList.add("visually-hidden"),w.classList.remove("is-onscreen"),M.classList.add("visually-hidden"),M.classList.remove("is-onscreen"),l.classList.add("visually-hidden"),l.classList.remove("is-onscreen","happy"),l.classList.add("normal"),R.classList.remove("slide-out-elliptic-bottom-bck"),Y.classList.remove("submited"),W.classList.remove("submited"),f.reset(),p.forEach(s=>s.classList.remove("filled","hovered"))}document.addEventListener("DOMContentLoaded",async()=>{(await ge()).length>=3&&Ee()});g.defaults.baseURL="https://sound-wave.b.goit.study/api/";async function ge(){try{const e=await g.get("https://sound-wave.b.goit.study/api/feedbacks",{params:{limit:3,page:1}}),t=Array.isArray(e.data)?e.data:e.data.data;return console.log("–û—Ç—Ä–∏–º–∞–Ω–æ –≤—ñ–¥–≥—É–∫—ñ–≤:",t),!Array.isArray(t)||t.length===0?(console.warn("–°–ø–∏—Å–æ–∫ –≤—ñ–¥–≥—É–∫—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π."),[]):(be(t),t)}catch(e){return console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –≤—ñ–¥–≥—É–∫—ñ–≤:",e),document.getElementById("feedback-container").innerHTML='<li class="swiper-slide"><p>–í—ñ–¥–≥—É–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ.</p></li>',[]}}function be(e){const t=document.getElementById("feedback-container");t.innerHTML="",e.forEach(s=>{const n=Math.round(s.rating);t.insertAdjacentHTML("beforeend",`
      <li class="swiper-slide">
        <div class="feedback-card">
          <div class="rating value-${n}" aria-label="Rating: ${n} –∑ 5"></div>
          <p class="feedback-text">${s.descr}</p>
          <p class="feedback-author">${s.name}</p>
        </div>
      </li>`)})}function Ee(){new X(".feedback-swiper",{loop:!0,pagination:{el:".custom-pagination",clickable:!0,renderBullet:(e,t)=>`<span class="${t}"></span>`},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}})}const O=document.querySelector("#open-feedback");O&&O.addEventListener("click",()=>{Le()});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector("[data-menu-open]"),t=document.querySelector("[data-menu-close]"),s=document.querySelector("[data-menu]"),n=document.querySelectorAll("[data-menu-link]"),o=document.body;e&&e.addEventListener("click",r),t&&t.addEventListener("click",a),s&&s.addEventListener("click",function(c){c.target===s&&a()}),document.addEventListener("keydown",function(c){c.key==="Escape"&&s.classList.contains("is-open")&&a()}),n.forEach(c=>{c.addEventListener("click",function(h){const d=this.getAttribute("href");d.startsWith("#")&&(h.preventDefault(),a(),setTimeout(()=>{const m=document.querySelector(d);if(m){const u=document.querySelector(".header").offsetHeight,v=m.offsetTop-u-10;window.scrollTo({top:v,behavior:"smooth"})}},300))})});function r(){s.classList.add("is-open"),o.classList.add("menu-open")}function a(){s.classList.remove("is-open"),o.classList.remove("menu-open")}});
//# sourceMappingURL=index.js.map
